小白是这样打造图书管理系统的（二）

副标题：数据结构设计很重要~



接上文书



## 第二部分：设计数据库

#### 一、数据表结构









#### 二、填充数据

###### 1、创建数据库

在 Windows 系统命令控制台上，输入以下命令。

```shell
# 新建目录 C:\BMS2020\DATA，用于放置数据库文件
mkdir -p C:\BMS2020\DATA
```



在 SSMS 查询窗口中执行以下命令。

```mssql
-- 创建数据库 BMS2020
USE [master]
GO

/****** Object:  Database [BMS2020]    Script Date: 07/07/2020 10:10:10 ******/
CREATE DATABASE [BMS2020] ON  PRIMARY 
( NAME = N'BMS2020', FILENAME = N'C:\BMS2020\DATA\BMS2020.mdf' , SIZE = 6144KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'BMS2020LOG', FILENAME = N'C:\BMS2020\DATA\BMS2020.ldf' , SIZE = 1024KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
GO
```

图1



右击 SSMS 左侧数据库一项，刷新后点开 `BMS2020` > 表，可以看到还没有用户表。

图2



###### 2、创建数据表

使用以下SQL语句构建数据表。

```mssql
USE [BMS2020]

-- 图书数据表
CREATE TABLE [dbo].[bms_book](
	[book_ID] [nchar](20) NULL,
	[book_CategoryId] [nchar](5) NULL,
	[book_title] [nchar](50) NULL,
	[book_Volume] [nchar](10) NULL,
	[book_Press] [nchar](50) NULL,
	[book_Author] [nchar](50) NULL,
	[book_ISBN] [nchar](50) NULL,
	[book_Keywords] [nchar](100) NULL,
	[book_PublishTime] [datetime] NULL,
	[book_Printing] [nchar](10) NULL,
	[book_Price] [nchar](10) NULL,
	[book_DateStorage] [datetime] NULL,
	[book_BeLent] [nchar](10) NULL,
	[book_BeLentCounts] [nchar](10) NULL,
	[book_Remark] [text] NULL
) ON [PRIMARY]

-- 借阅者数据表
CREATE TABLE [dbo].[bms_reader](
	[reader_ID] [nchar](15) NULL,
	[reader_Name] [nchar](10) NULL,
	[reader_Gender] [nchar](10) NULL,
	[reader_identificationR] [nchar](20) NULL,
	[reader_Type] [nchar](10) NULL,
	[reader_BeLent] [nchar](10) NULL,
	[reader_BeLentCounts] [nchar](10) NULL,
	[reader_Section] [nchar](20) NULL,
	[reader_Telephone] [nchar](20) NULL,
	[reader_Address] [nchar](50) NULL,
	[reader_Datefor] [datetime] NULL
) ON [PRIMARY]

-- 日志数据表
CREATE TABLE [dbo].[bms_log](
	[log_ID] [nchar](20) NULL,
	[log_Reader_ID] [nchar](15) NULL,
	[log_Reader_Name] [nchar](10) NULL,
	[log_Book_ID] [nchar](20) NULL,
	[log_Book_Title] [nchar](50) NULL,
	[log_Date_Lent] [datetime] NULL,
	[log_Date_Return] [datetime] NULL,
	[log_Date_FactReturn] [datetime] NULL,
	[log_User_Username] [nchar](10) NULL
) ON [PRIMARY]
```



数据表生成了。

图3



###### 3、填充数据

有了数据表，接下来就要操作这些表了。

我们要管理图书，当然系统中先要有图书，所以我们需要先录入图书信息。

```mssql
INSERT INTO [dbo].[bms_book]
           ([book_ID]
           ,[book_CategoryId]
           ,[book_title]
           ,[book_Volume]
           ,[book_Press]
           ,[book_Author]
           ,[book_ISBN]
           ,[book_Keywords]
           ,[book_PublishTime]
           ,[book_Printing]
           ,[book_Price]
           ,[book_DateStorage]
           ,[book_BeLent]
           ,[book_BeLentCounts]
           ,[book_Remark])
     VALUES
           (<book_ID, nchar(20),>
           ,<book_CategoryId, nchar(5),>
           ,<book_title, nchar(50),>
           ,<book_Volume, nchar(10),>
           ,<book_Press, nchar(50),>
           ,<book_Author, nchar(50),>
           ,<book_ISBN, nchar(50),>
           ,<book_Keywords, nchar(100),>
           ,<book_PublishTime, datetime,>
           ,<book_Printing, nchar(10),>
           ,<book_Price, nchar(10),>
           ,<book_DateStorage, datetime,>
           ,<book_BeLent, nchar(10),>
           ,<book_BeLentCounts, nchar(10),>
           ,<book_Remark, text,>)
```





