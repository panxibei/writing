【快速全面掌握 WAMPServer】05.整明白 Apache

副标题：【快速全面掌握 WAMPServer】05.整明白 Apache

英文：

关键字：wamp,wampserver,php,apache,mysql,mariadb,js,html



阿帕奇`Apache` 是一个非常著名的软件基金组织，始建于 `1999` 年，有可能比在坐的小伙伴年龄还要大。

号称世界最大的开源软件基金组织 `Apache` 目前为止已拥有数量众多的开源软件，它为地球村的村民们做出了巨大而杰出的贡献。

不过从狭义的角度来讲，通常我们所说的 `Apache` 则是指 `Apache HTTP Server` ，是一款非常流行的开源网页服务器软件。

没错，这个软件同样也是 `Apache` 软件基金组织众多软件之一，因此注意哈，后面我们谈及的 `Apache` 单纯只是在说一款网页服务器软件！

网页服务器软件，简单地说就是你可以拿它来做一个网站，可以解析网页文件并提供 `http(s)` 连接访问服务。

当它正常运行时，你就可以使用浏览器来访问它，而 `Apache` 正是网页服务器软件界的前辈！



### 初识 `Apache`

我们打开 `Apache` 官网，来简单认识一下这位可能比自己年龄还大的互联网前辈吧！

> https://www.apache.org/

图a01



呃...首页一根羽毛映入眼帘......

什么，羽毛？

是的，它正是 `Apache` 的经典标志 `Logo` ，记住它！

在那个互联网还末有非常丰富软件的年代，`Apache` 完全可称得上是快速、高效、稳定的高级代表，我猜羽毛正是它想向人们表达自己是如何的轻盈而又飘逸。

作为一款非常流行的网页服务器软件，官网自然也是用着自家的软件了。

要想验证这个想法，我们可以在浏览器窗口上按下 `F12` 键开启调试模式，然后在 `网络` 一栏中查看消息头中的响应信息。

图b01



那我们想要得到的网页服务器软件又在哪里呢？

其实它可以从这边找到！

依次点击首页顶部菜单 `Downloads` > `Distribution` 。

图a02



在打开的页面中，我们从一大坨软件中找到 `httpd` 。

是不是有些奇怪呢？

其实没错！我们需要注意的是，其实软件包应该被叫作 `httpd` 才更合理，提供的是 `http(s)` 服务嘛，在 `Linux` 下就是这个软件名称哦！

你不可能去安装一个名叫 `apache` 的软件，因为那不是它真正的名称。

图a03



点击进入 `httpd` 目录后，我们就可以找到最新版的 `httpd` 程序包来下载了。

`tar.bz2` 或 `tar.gz` 只是打包的方式不太一样，但解压后本质是一样的。

图a04



刚才说的这些都是 `Linux` 版本，`Windows` 上想要跑 `httpd` 则需要到其他地方寻找。

> https://httpd.apache.org/docs/current/platform/windows.html



实际上 `httpd` 官方并不提供 `Windows` 下的二进制软件，而仅提供源代码。

因此如果想要获取可以在 `Windows` 上奔跑的可执行程序，那么需要我们自己编译。

这对于像和一样小白的朋友们来说，肯定是道不可逾越的鸿沟啊！

好在网络上大神辈出，比如像下面我们可以下载到 `Apache` 二进制文件和模块文件。

其中的 `VS17` 字样，是指对应的 `Visual Studio C++` 组件版本，比如 `VS17` 就对应的 `2022` ，那么我们事先安装 `VC++2022` 就可以正常使用 `Apache` 了。

图b02



当然了，被官网认证并列举出的 `Apache for Windows` 可不止一个项目，其中就包括我们这套系列所讲的 `WampServer` 。

使用 `WampServer` 中的 `Apache` 安装省时省力，使用起来也非常方便。

如果你老老实实依次安装前面所提到的二进制安装包以及数量众多的模块文件，那么很有可能你会遭遇到无数个深坑，所以说小白还是用 `WampServer` 来得实际一些。

因此珍惜生命，接下来我们还是聊一聊 `WampServer` 上的 `Apache` 吧！



### `WampServer` 中的 `Apache`

当我们安装完 `WampServer` 之后，`Apache` 也随之安装完成了。

理所当然地，它已经帮我们把二进制文件还有所需模块统统一股脑儿搞定了！

图c01



从图中的菜单上我们能看到，当前 `Apache` 的版本是 `2.4.51` 。

除此之外，菜单的上半部分是关于 `Apache` 服务、模块、设置以及工具的设定。

而菜单的下半部分则罗列了 `Apache` 几个主要的配置文件，通常我们不必刻意手动去修改这些文件，`WampServer` 往往带有配置修改工具，后面会说到。



##### 服务管理

好，我们来先看下 `Apache` 的服务管理。

这个 `Apache` 服务能否正常启动并运行可是关系到 `http` 是否有效可用的关键。

在 `Apache` 相关的菜单中的第二项，`WampServer` 就为我们列出了几个服务管理操作。

图c02



如图，在 `服务管理'wampapache64'` 的子菜单中，我们常用的就是前面三个：启动、停止和重启。

关于下面的安装/卸载服务，还有一个优雅地重启 `Graceful Restart` ，一般情况下不太用得到。

简单的说，安装/卸载服务用于有故障时重置 `Apache` 服务的。

而优雅重启则是当我们变更配置后想要让设定生效但又不想重启服务导致系统中断，那么就可以用到这个功能，它可以动态加载变更后的配置设定。

另外，也可以通过查看 `Windows` 服务管理中名为 `wampapache64` 的服务状态，来及时了解 `Apache` 是否工作正常。

图c03



##### `Apache 模块`

至于 `Apache` 模块，`WampServer` 已经帮我们搞定了一切。

你看，这么多模块，反正我是不可能自己去挨个下载安装的，这工作量想想都恐怖啊！

如果要启用或禁用某个模块，那就用鼠标点点，打上勾就生效，没打勾就无效。

图c04



##### `Apache` 设置

同样，关于 `Apache` 设置，也是不需要我们去刻意修改的，除非有特殊的要求。

图c05



##### `Apache` 工具

接下来是 `Apache` 工具，说白了就是 `WampServer` 为我们提供的额外的方便法门。

这几项都比较有用，特别是第一个检查 `httpd.conf` 语法，如果我们修改了配置文件，最好是先用这个检查一下，然后再重启服务以确保服务正常运行。

图c06

图c07



##### 别名（Alias）目录

还有一个，就是别名 `Alias` 目录，用来查看编辑 `WampServer` 中的别名目录。

别名实际上我们为给网站起的小名。

怎么理解它呢？

通常网站是一个域名，比如 `www.sysadm.cc` ，我们访问这个网站就打上这个域名回车就行了。

而别名呢，就是在这个域名后面加上个名字，这个名字指向了特定的网站目录。

比如 `www.sysadm.cc/adminer` ，我们在后面加了一个别名 `adminer` ，那么它就会访问我们指定的网站目录。

需要注意的是，这个别名 `adminer` 指向的目录并不一定是在网站根目录 `wwwroot` 中。

就像 `WampServer` 中的一些别名目录一样，它的实际目录路径在 `apps` 中。

这样做的好处显而易见，一个网站可以有多个不同的访问目录，非常灵活。

图c09



默认情况下，`WampServer` 已经有了四个别名目录，这些别名目录用于一些系统信息的显示和管理。

比如：`adminer` 、`phpmyadmin` 和 `phpsysinfo` 。

并且我们很容易就可以添加、编辑或删除别名，非常方便。

图c08



这个别名目录非常有用，我们可以设定多个不同的别名来访问不同的目录内容，但是它和虚拟主机名还不是一回事。

别名通常是在同一个域名下有多个别名子目录，它依附于同一个域名，而虚拟主机则是指不同域名的各个独立的站点。



##### 文件&文档

菜单的下半部分是一些 `Apache` 的主要配置文件和相关文档。

以下这些文件都是我们平时经常需要操作的。

* `httpd.conf` - 主配置文件

* `httpd-vhosts.conf` - 虚拟主机配置文件

* `Apache 错误日志`

* `Apache 访问日志`

  

配置文件叫作 `httpd.conf` ，这个我们前面说过，实际的软件包名字就叫 `httpd` ，因此也没什么好奇怪的。

通常 `WampServer` 默认已经帮我们设定好了一个 `localhost` 的站点了，并不需要特别去配置它就能使用了。

如果我们需要改变或设定一些特殊的设定，那么我们才需要直接编辑 `httpd.conf` 文件 或 `httpd-vhosts.conf` 文件。

比如我们想让用户通过指定的 `IP` 或端口号来访问网站而不是默认的 `0.0.0.0:80` ，那么我们可以在 `httpd.conf` 文件中修改 `Listen` 参数。

```
Listen 192.168.1.100:8080
```



而关于错误日志和访问日志，这两大法器对我们来说是非常重要的。

前者（错误日志）可以帮助我们判断配置文件是否配置成功，当有错误发生时我们就可以用它来查看是哪里出了问题，比如 `Apache` 服务无法正常启动等等。

后者（访问日志）则是用来查看用户访问我们网站时的连接记录，可以用来判断网站访问是否正常，比如访问端口是否正确、访问权限是否正确等等。

具体的使用方法将在后续教程中一一详细说明。



### 简单测试 `Apache`

说到这里，我们还是给小伙伴们实际操作演示一下，实践出真知，这样会比较好理解一些。



我们先找到 `WampServer` 的网站根目录，假如你是默认安装在 `C` 盘的。

```
C:\wamp64\www
```

在根目录下新建一个文本文件，内容如下，并保存文件名为 `test.html` 。

```
<!DOCTYPE HTML>
<html lang="en">
<head><meta charset="UTF-8"></head>
Hello！！欢迎关注网管小贾！！
</html>
```



好，我们在确保开启 `WampServer` 的前提下打开浏览器，输入如下网址访问。

注意，可不是直接双击这个文件哦！

```
http://localhost/test.html
```

图c10



之后我们就应该可以看到文件内容的正常输出了。

图c11



随后我来检查一下访问日志。

点击 `WampServer` 任务栏图标，依次点击 `Apache` > `Apache 访问日志` 。

图d01



在打开的日志文件 `access.log` 中，我们可以看到最新的几条日志记录。

从中我们可以得知用户源地址、访问请求方式和协议、访问的是什么，有没有成功等等信息。



比如就这个例子来说：

用户源地址是 `::1` ，这是个 `IPv6` 的回环地址，因为我们用的是 `localhost` 嘛；

访问协议及请求方式分别是 `http/1.1` 以及 `GET` 请求；

响应编号 `200` 表示连接成功；

最后面的数字则表示请求资源的大小。

图d02



### 写在最后

本文旨在入门式地为小伙伴们介绍 `Apache` 的一些概念，具体的比较复杂的配置可以参数其他文章，本文如果详细展开不太现实，也没有十分的必要。

由于 `WampServer` 为我们提供了非常便利的 `Apache` 引擎，因此我们只需初步的基础知识就能够很好地使用它了。

总之，当你接触多了，基本上所有的 `Web` 服务软件都能够理解了，因为它们本质上都是为了提供网页访问服务的，而 `IP`地址和请求方式啥的概念都是通用的。

当我们将一个文件放到 `Web` 服务器上时就能随时随地地访问它，不论这个文件是什么样的。

如果它是 `htm/html` 文件，那么它的内容就会被解析为标记语言。

如果它是个压缩包文件，那么它会被浏览器视为下载文件。

但是仅仅是用于显示和下载的话，那互联网也不会如此丰富多彩，要知道依靠 `Apache` 这样的 `Web` 服务软件仅仅只能做到显示静态内容而已。

如果我想填写一个表单，用于向服务器提交一份资料，那么只靠 `Apache` 似乎就不行了。

这样的功能被称作动态内容，像这样超出 `Apache` 正常工作范围之外的事情肯定是需要其他人来做，而在 `WampServer` 中也确实有这么一位专业解析动态内容的。

没错，在一下期中，我们将隆重介绍 `WampServer` 别一位成员， `Apache` 的好伙伴：`PHP` ！





*PS：《【小白PHP入坑必备系列】快速全面掌握 WAMPServer》教程列表：*

* *【快速全面掌握 WAMPServer】01.初次见面，请多关照*
* *【快速全面掌握 WAMPServer】02.亲密接触之前你必须知道的事情*
* *【快速全面掌握 WAMPServer】03.玩转安装和升级*
* *【快速全面掌握 WAMPServer】04.人生初体验*
* *【快速全面掌握 WAMPServer】05.整明白 Apache*
* *【快速全面掌握 WAMPServer】06.整明白 PHP*
* *【快速全面掌握 WAMPServer】07.整明白 MySQL 和 MariaDB*
* *【快速全面掌握 WAMPServer】08.想玩多个站点，你必须了解虚拟主机的创建和使用*
* *【快速全面掌握 WAMPServer】09.如何在 WAMPServer 中安装 Composer*
* *【快速全面掌握 WAMPServer】10.HTTP2.0时代，让 WampServer 开启 SSL 吧！*
* *【快速全面掌握 WAMPServer】11.安装 PHP 扩展踩过的坑*
* *【快速全面掌握 WAMPServer】12.WAMPServer 故障排除经验大总结*
* *【快速全面掌握 WAMPServer】13.PHP调试麻烦？请 xDebug 来帮忙！*
* *【快速全面掌握 WAMPServer】14.各种组件的升级方法*



**扫码关注@网管小贾，阅读更多**

网管小贾的博客 / www.sysadm.cc