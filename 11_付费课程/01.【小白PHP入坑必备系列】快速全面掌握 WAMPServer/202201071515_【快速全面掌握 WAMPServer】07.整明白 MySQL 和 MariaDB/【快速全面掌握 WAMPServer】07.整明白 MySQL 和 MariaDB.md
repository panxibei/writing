【快速全面掌握 WAMPServer】07.整明白 MySQL 和 MariaDB

副标题：【快速全面掌握 WAMPServer】07.整明白 MySQL 和 MariaDB

英文：master-wampserver-quickly-and-understand-mysql-and-mariadb

关键字：wamp,wampserver,php,apache,mysql,mariadb,js,html



> **WAMPSERVER免费仓库镜像（中文）**
> https://www.sysadm.cc/index.php/xitongyunwei/720-repository-of-wampserver-files



上一篇我们学习了 `PHP` ，今天我们接着来学习了解一下另一位 `LAMP` 中的 `M` ，同样是作为四剑客之一的 `MySQL/MariaDB` 。

`MySQL/MariaDB` 实际上是指数据库，是一种关系型数据库管理系统，可与 `PHP` 解释器一起配合，作为后台的数据存储和记录工作。

数据库是学习任何编程语言都绕不过去的一道坎，不过也不用太担心，我们初学入门还不算太难的，此处可以有信心哦！

作为数据库这么一个内容，实际上是可以单独拿出来专门讲解的，但其所涉内容实在是太过庞大而繁杂。

因此，我们这里只讲与 `WAMPServer` 有关的数据库内容。

如果你之前有过 `MySQL/MariaDB` 的学习经历，那么非常好，对于后面内容的理解会变得容易得多。



好，有小伙伴可能会问了，这个数据库系统可真怪，怎么叫这个名字？

其实 `MySQL` 和 `MariaDB` 是两个名字，分别是独立的两套系统，你单独使用其中任何一套都可以作为数据库使用。

那为啥将这两套放一块儿，而不是其他的？

其实你可以将他们简单地理解为兄妹两人，是的，他们具有血缘关系，`MySQL` 出生早，是哥哥，而 `MariaDB` 晚一些，是妹妹。

关于这兄妹俩的前世今生呢就说来话长了......



### 插播 `MySQL/MariaDB` 趣史

`MySQL` 诞生于 `2000` 年前后，然而在他刚满8岁的某一天，也不知道怎么冷不丁地被一家名叫 `SUN` 的公司给看上了，想拉 `MySQL` 跳槽到他们那边搬砖，打着高科技的旗号美其名曰搬砖也可以高大上。

谁料年纪轻轻的 `MySQL` 他就信了，可是这非但不是他走向光明人生的开始，反而在短短一年左右的时间内被另外一家更多大的公司给相中了，这家公司叫 `Oracle` 。

虽然 `MySQL` 进入了大公司工作，个人能力也逐步上升，干着光鲜体面的工作，但他却因此失去了自由。

从前和他玩得好的一些小伙伴总是约不到他，`MySQL` 呢搬砖也很忙，不能完全放开和小伙伴一起愉快地玩耍。

更甚者随着时间的推移， `MySQL` 被看得越来越紧，小伙伴们感觉在不久的将来将永远见不到他了！

于是他们就跑去找 `MySQL` 的爹地商量，而事实上作为监护人的这位 `MySQL` 的亲爹地他也见不到 `MySQL` 了。

于是一来二去这么一折腾，`MySQL` 的爹地终于狠下心来，政策不是放开了嘛，那我就来个二胎，干脆给 `MySQL` 添了个妹妹得了，就是后来的 `MariaDB` 。

在 `2009` 年，`MariaDB` 呱呱坠地，而最初在她的身体里，可是与她的兄长 `MySQL`  有着 `99%` 高度相似的 `DNA` 。

只是后来随着 `MariaDB` 慢慢长大，渐渐地就与 `MySQL` 不一样了。



他俩长这样，哥哥 `MySQL` 是一头海豚，妹妹 `MariaDB` 则是一头海狮。

图01



`MySQL` 与 `MariaDB` 的版本兼容的简单对照表。

| MySQL | MariaDB        |
| ----- | -------------- |
| 5.1   | 5.1 5.2 5.3    |
| 5.5   | 5.5            |
| 5.6   | 10.1 10.2 10.3 |
| 5.7   | 10.2 10.3 10.4 |
| 8.0   | 10.5 10.6      |



以上并非权威确认，仅供版本迁移时作为有限替代的参考，具体还是要请小伙伴们移驾官网按照实际情况确认。



### `MySQL` 与 `MariaDB` 可选其一

好了，关于兄妹俩的黑历史，有兴趣的小伙伴可以上网细细查来。

在这里我们只要知道：

1. `MySQL` 和 `MariaDB` 最初是一个爸爸。
2. `MySQL` 作为商用软件现在已经闭源，众多现有 `Linux` 发行版数据库源也早已将原先的 `MySQL` 切换成了 `MariaDB` 。
3. 而 `MariaDB` 作为开源软件，你可以随便使用，但有一个前提，就是兄妹俩有兼容冲突问题，需要先卸载 `MySQL` 才可正常使用。



敲黑板：同一时间，`MySQL` 或 `MariaDB` 你只能选择其一使用，否则他们是会打架的。

当然了，如果在 `WAMPServer` 中你非要一起使用也不是不可以，可以通过设定不同的服务端口来实现。

具体看后面的介绍。



### `MySQL/MariaDB` 的安装

在之前的文章《03.玩转安装和升级》中，小伙伴们应该还记得吧，在选择安装组件时，我们需要选择数据库。

图02



从前面的图片中，我们也能看到， `MariaDB` 相较于 `MySQL` 所占磁盘的容量要小得多，前者是 `200` 多M，而后者竟然达到了将近2个G。

至于选择哪个系统以及什么版本，可以根据实际测试程序的场景来定夺。

比如将来要在生产环境部署的是 `MariaDB` ，那么最好就选 `MariaDB` ，以减少兼容适配问题。



`WAMPServer` 安装结束后会给我们一个提示，它告诉我们在以下路径中有 `MySQL/MariaDB` 的说明文档。

```
wamp(64)\mariadb_mysql.txt
```

图03

图04



这其中的内容非常重要，我们一一道来！



##### 1、关于 `WAMPServer` 的 `MySQL` 和 `MariaDB`

`MySQL` 从 `Wampserver` 的最初就被支持，而 `MariaDB` 是从 `Wampserver 3.0.8` 开始才受到支持的。

对于 `SQL` 连接，不管是 `MySQL` 还是 `MariaDB` ，其默认服务端口是并且始终是 `3306` 。

不管是 `MySQL` 还是 `MariaDB` ，在 `WAMPServer` 中都是由完整安装程序安装的，不存在精简程序的情况。



##### 2、通过 `MariaDB` 或 `MySQL` 连接数据库

默认数据库管理器端口为 `3306` ，未指定端口号的连接将始终位于默认端口上。

如果您要使用的数据库管理器（`MySQL` 或 `MariaDB` ）不是默认的，那么必须在连接请求中指定端口号，因为它不会使用默认端口 `3306` 。

再重复强调一遍，在不指定端口的情况下，它将使用默认端口 `3306` ，则非默认端口情况下，建立连接必须显式指定。



通常，连接脚本不必特别指定要使用的端口。例如：

```
$mysqli=new mysqli('127.0.0.1'，'user'，'password'，'database');
```



或者，在程序代码中：

```
$mysqli=mysqli_connect('127.0.0.1'，'user'，'password'，'database');
```



因此，要与不使用端口 `3306` 的管理器连接，则必须在连接请求中**指定端口号**（比如 `3307` ）：

```
$mysqli=new mysqli('127.0.0.1'，'user'，'password'，'database'，'3307');
```



或者，在程序代码中：

```
$mysqli=mysqli_connect('127.0.0.1'，'user'，'password'，'database'，'3307');
```



要检查 `MySQL` 或 `MariaDB` 数据库管理器上的连接，我们可以使用以下脚本：

```
wamp(64)\www\testmysql.php
```

图05



请小伙伴注意了，这里并不让你去双击 `testmysql.php` 这个文件，而是要在启动 `WAMP` 之后，在地址栏内访问这个文件。

```
http://localhost/testmysql.php
```

图06



从图中我们能很清楚地看到，当前数据库是 `MySQL` ，并且版本是 `5.7.36` ，连语言字符集都知道了 `latin1` 。

那我们前面明明也安装了 `MariaDB` ，这里怎么看不到呢？



##### 3、`MySQL` 与 `MariaDB` 之间切换为默认数据系统（ `DBMS` ）

敲黑板：如果你想将数据库从 `MySQL` 迁移到 `MariaDB` 或反向迁移，那么必须在切换 `DBMS` 之前以 `SQL` 格式备份数据库（比如用 `phpMyAdmin`的导出 `EXPORT` 功能）。

这是在 `MySQL` 和 `MariaDB` 之间传输数据库的唯一可靠方法。



如果 `MySQL` 和 `MariaDB` 两者都已启用，也就是这两个你都在用，那么有一个工具可以通过单击来切换当前默认的 `DBMS` ：

* 如果默认 `DBMS` 是 `MySQL` ，那么

  右键点击 `Wampmanager 图标` > `工具` > `调换默认 DBMS MySQL <-> MariaDB`

或者

* 如果默认 `DBMS` 是 `MariaDB` ，那么

  右键单击 `Wampmanager图标` > `工具` > `调换默认 DBMS MariaDB <-> MySQL`

图07



在调换默认 `DBMS` 之后，我们还可以用前面介绍过的如下脚本来测试是否切换成功。

```
wamp(64)\www\testmysql.php
```

当然，最后 `DBMS` 调换成功后请千万别忘记还是需要导入之前保存的数据库备份。



##### 4、仅启用一个数据库管理器，也可以不启用任何数据库管理器

你不必保持 `MySQL` 和 `MariaDB` 两个数据库管理器同时处于活动状态，你完全可以停用不需要的其中一个管理器。

只要你愿意，你甚至可以完全禁用这两个数据库管理器：

右键点击 `Wampmanager 图标` > `Wamp 设置` > 取消勾选 `启用 MariaDB`

右键点击 `Wampmanager 图标` > `Wamp 设置` -> 取消勾选 `启用 MySQL`

在此之后，当你想要使用它们的时候，可以重新激活启用两者中的任何一个。

这些操作并不会卸载 `DBMS` ，它仅仅是暂时注销了该 `DBMS` 相应的 `Windows` 服务。

图08



##### 5、没有默认的 `DBMS`

这个标题挺奇怪的哈！

其实这意味着当前 `WAMPServer` 可能没有数据库管理器正在使用默认端口 `3306` ，不管是 `MariaDB` 和/或 `MySQL` 这两者中一个或多个，即使它们已被启用，但其服务并没有工作在 `3306` 端口（可能工作在其他端口）。

因此这种情况下我们必须在连接请求中显式地指定实际使用的端口号，因为不是默认端口 `3306` ，连接程序可能无法正确识别。

接着可以的话最好还是选择默认情况下要使用的 `DBMS` 。

为此，我们可以使用内置工具（右键单击 `Wampmanager 图标` > `工具` ）将端口 `3306`（使用 `xxxx` 以外的端口）分配给要设置为默认值的 `DBMS`（ `MariaDB` 或 `MySQL` ）。

从以面图中我们可以看出，切换端口非常方便。

图09

图10



### 版本切换

对于同一数据库系统来说，在默认安装时，只能先选择一个版本（比如 `MySQL` 的 `5.7` 和 `8.0` 两个版本）。

如果我就是同时需要这两个版本，测试时来回切换行不行呢？

只要你想的，当然是可以的罗，只是你要稍后单独以组件方式安装另一个版本。

比如 `WAMPServer` 安装了 `MySQL 5.7` ，我想再要一个 `8.0` ，应该怎么办呢？



首先，我们看一看当前的数据库版本。

可以看到是 `MySQL 5.7` 没错了。

图11



然后看到那个加号了吗？

它就是用来添加其他版本程序的，并且不限于 `MySQL` ，其他程序也可以用它来添加。

图12



我们点击这个加号，出现了一个窗口。

图13



实际上 `WAMPServer` 已经将添加组件更新为单独安装形式了。

换句话说就是我们可以直接去下载组件安装包来安装我们需要的组件。

作为例子，我们现在想要安装 `MySQL 8.0` ，那么我们就去下载相应的安装包回来安装即可。

**可以随时关注我的公众号，然后发送 wamp 来查看最新的组件安装包。**



好了，我下载好了 `MySQL 8.0` 的安装包，下面我来为小伙伴们演示一下。

图14

图15

图16

图17

图18

图19



整个安装过程非常简单，但有几点需要我们注意一下。

一是安装程序并没有指定安装路径，因此 `WAMPServer` 尽量以默认路径形式安装，然后再安装 `MySQL 8.0` 。

二是在安装之前切记备份原来数据库的数据，安装完成后再导入备份。

三是在安装过程中 `WAMPServer` 会中止服务，因此安装完毕记得重新开启服务。



一旦安装完成，我们再回过来查看，就可以看到 `MySQL` 的版本多了一个 `8.0` 。

此时就可以随时切换了，只要点选一下就行，很方便！

图20



### `MySQL/MariaDB` 的卸载

当我们选择默认安装 `WAMPServer` 时，程序会自动将 `MySQL` 和 `MariaDB` 都给安装上。

这就是我们刚刚说到的兄妹俩共存的情况。

其实质是通过不同的服务端口实现共存，比如 `MySQL` 使用 `3306` 端口，`MariaDB` 则使用 `3307` 端口。

当然话说回来，有的小伙伴就只想用其中之一，那么没关系哈，我们完全可以在安装完成后，将其中一位请出去。



我们拿 `MariaDB` 举例，首先禁用 `MariaDB` 。

右键点击 `WampServer图标` > `Wamp设置` > 取消勾选 `启用 MariaDB` 。

图21



然后删除未使用的 `MariaDB` 。

右键点击 `WampServer图标` > `工具` > `删除未使用版本` > `删除 mariadb 10.6.5` 。

图22



这里需要强调两点。

一，如果没有万分的必要（比如空间不足），建议最好保留未启用的数据库系统，因为你一旦删除了，之后又想启用的话只能是再花时间安装，有点费时费力。

二，删除指定版本的数据库系统前，需要将其切换为非默认系统，同时禁用它。



### `MySQL/MariaDB` 客户端

在 `WAMPServer` 最初安装完成之时，在 `bin` 文件夹内会生成两个 `DBMS` 子文件夹，分别是 `MySQL` 和 `MariaDB` 。

图23



我们以 `MySQL` 为例演示一下如何使用客户端程序。

在以下路径中，我们可以找到客户端程序。

```
C:\wamp64\bin\mysql\mysql5.7.36\bin\mysql.exe
```

敲黑板：`mysql.exe` 是客户端程序，而 `mysqld.exe` 后面加了一个字母 `d` 就是服务端程序了，切记！



我们可以直接进入这个目录，也可以将这个路径添加到系统变量中，那样我们就可以在任意目录调用 `mysql.exe` 了。

我们输入 `mysql` 命令执行一下，发现系统拒绝连接。

图24



为啥会这样呢？

实际上命令不是这么写的，需要我们在命令后面加上一些参数才行。

由于最初 `MySQL` 的 `root` 用户是没有密码的，因此我们可以这样来登录数据库。

```
mysql -u root -p
```

图25



这时系统提示我们输入密码，实际上密码为空，所以我们直接回车即可。

图26



OK！成功登录进来了！

接下来我们就可以操作数据库了。

比如我们可以修改 `root` 的密码。

```
ALTER USER 'root'@'localhost' IDENTIFIED BY 'NewPassHere123!';
```

图27



在这里需要强调的是，`root` 用户只修改了 `localhost` 的密码，并且根据密码策略可能我们需要设定一定复杂度的密码，否则命令可能不会通过。



以上只是为小伙伴们举个简单的例子，具体数据库是如何操作的，还需要大家参考学习其他教程内容，这里就不再赘述了。



### 对小白友好的图形客户端 `PhpMyAdmin`

有的小伙伴会说，这黑漆漆的命令控制台我用不惯，命令我也记不住几个，有没有更直观方便一点的客户端呢？

都说到这儿了，那必须肯定有啊！

就是我们前面有提到过的 `PhpMyAdmin` ，作为提供 `GUI` 界面的程序，其操作起来对小白新手是非常友好的。



`phpMyAdmin` 是一款非常流行的基于 `WEB` 形式的 `MySQL/MariaDB` 数据库管理工具。 

在安装时，`WAMPServer` 会帮我们安装好 `PhpMyAdmin` 组件。

至于为啥有两个版本，那是因为要兼容不同版本的 `PHP` 。

图28



`PhpMyAdmin` 配置为允许访问当前活动的 `MySQL` 或 `MariaDB` 数据库。

如果两个 `DBMS` 都被激活，我们将在登录页面上看到一个下拉列表项，称为 `选择服务器` ，默认服务器将首先显示在下拉列表中。

注意选择要在此处用作登录的 `DBMS` 。

图29



敲黑板：如果你有不同的用户帐户，则必须为所选 `DBMS` 使用对应正确的帐户哦！

此外，如果在两个 `DBMS` 上具有相同名称的帐户（比如 `root` ），如果你设置了不同的密码，那么请小心需要为帐户和`DBMS` 使用正确的密码。



那么具体在 `WAMPServer` 中怎么打开使用这个 `PhpMyAdmin` 呢？

OK，跟我一起做！



左键点击 `WampServer 图标` > `PhpMyAdmin` > `phpMyAdmin 5.1.1` 。

当然，你选 `4.9.7` 也是可以的，根据你当前活动对应的 `PHP` 版本来。

图30



程序自动打开浏览器，并访问如下链接。

```
http://localhost/phpmyadmin/
```

我们输入用户名和密码，并选择登录的数据库管理系统，点击 `执行` 登录。

图31



OK！顺利登入！

图32



其界面大体分为左侧导航栏和右侧操作区域。

左侧导航栏罗列了当前的服务器，及其所具有的数据库列表。

右侧操作区域呢，由上部的菜单来区分具体的操作内容。

详细的使用教程请小伙伴们参考其他的文章吧，这里也不多啰嗦了。

总之，只要你多用用，很快就会熟练的。



### 教程小结

本文简单地介绍了关于 `WAMPServer` 中 `MySQL/MariaDB` 的相关知识内容，意在带领小伙伴们对数据库组件的操作使用做个入门。

文章的重点在于 `WAMPServer` 中如何灵活高效地调用数据库组件，如果自己动手安装使用第三方程序将会额外增加维护成本。

另外数据库本身又是一大学习内容，需要各位小伙伴另外参考资料学习。

有了一定数据库基础的小伙伴会更容易学习并理解前面所讲的内容，毕竟数据库完全可以单独拿出来使用。

所以说，学习数据库知识再配合阅读本文学习效果更佳！

某些极端情况下，你也可以不用费劲去找 `MySQL` 的安装包，直接用 `WAMPServer` 自带的也行。

但请注意，`WAMPServer` 作为调试之用，如用于生产环境还请三思。

好了，今天就讲这么多吧，下一期教程敬请各位期待！



*PS：《【小白PHP入坑必备系列】快速全面掌握 WAMPServer》教程列表：*

* *【快速全面掌握 WAMPServer】01.初次见面，请多关照*
* *【快速全面掌握 WAMPServer】02.亲密接触之前你必须知道的事情*
* *【快速全面掌握 WAMPServer】03.玩转安装和升级*
* *【快速全面掌握 WAMPServer】04.人生初体验*
* *【快速全面掌握 WAMPServer】05.整明白 Apache*
* *【快速全面掌握 WAMPServer】06.整明白 PHP*
* *【快速全面掌握 WAMPServer】07.整明白 MySQL 和 MariaDB*
* *【快速全面掌握 WAMPServer】08.想玩多个站点，你必须了解虚拟主机的创建和使用*
* *【快速全面掌握 WAMPServer】09.如何在 WAMPServer 中安装 Composer*
* *【快速全面掌握 WAMPServer】10.HTTP2.0时代，让 WampServer 开启 SSL 吧！*
* *【快速全面掌握 WAMPServer】11.安装 PHP 扩展踩过的坑*
* *【快速全面掌握 WAMPServer】12.WAMPServer 故障排除经验大总结*
* *【快速全面掌握 WAMPServer】13.PHP调试麻烦？请 xDebug 来帮忙！*
* *【快速全面掌握 WAMPServer】14.各种组件的升级方法*



**扫码关注@网管小贾，阅读更多**

网管小贾的博客 / www.sysadm.cc