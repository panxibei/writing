天不怕地不怕，就怕我的电脑挂，沙盒器手中握，病毒木马都不怕！

副标题：天不怕地不怕，就怕我的电脑挂，沙盒器手中握，病毒木马都不怕！

英文：not-afraid-of-virus-and-trojans-because-of-holding-sandbox-in-my-hand

关键字：sandbox,sandboxie,sandboxie-plus,沙盒,沙箱,沙盘



“快！把门打开！要是耍花样，老子一枪崩了你！”，劫匪手持枪械穷凶极恶。

银行经理一个踉跄险些摔倒，只得战战兢兢输入密码刷了虹膜。

金库的大门瞬间被打开，劫匪们一股脑儿涌入，面对着耀眼的黄金和花花绿绿的钞票口水直流……



劫匪头子一声令下：“兄弟们，快给我装！”

话音刚落，眼前的黄金钞票忽地消失了，就如科幻片里的一样！

劫匪们不禁大吃一惊，愣在原地面面相觑。

劫匪头子最先反应过来，想要抓那银行经理问个究竟。

可他一回头，那银行经理也早已不知所踪！

说是迟，那时快，大门反锁，报警系统启动，刺耳的警报声此起彼伏……



“没错，这就是我们利用沙盒做的一次极具代表性的演习！”

“大家可以看到，沙盒为我们提供了一个安全的隔离环境，既保证了财产不受破坏和损失，又能让那些流氓强盗别有用心之徒无处遁形！”

接着，沙合皿博士开始为观众们讲述起了神秘的沙盒……



所谓沙盒（英文：`sandbox` ），你也可以叫它沙箱，是计算机专业中的一个术语。

它为系统环境提供了一种安全机制，可以为运行中的程序提供隔离环境，进而保护系统环境本身不会被影响或破坏。

正如演习中所示，劫匪们看到的都是假的，一旦这些虚拟的资源被触及，那么非但得不到它，还会触发警报，所作所为都会被清晰地记录下来。



沙盒作为一种软件，目前比较成熟的有不少，我们只拿其中一个举例：`Sandboxie` 。

如今 `Sandboxie` 已经发展到 `Plus` 版本了，叫做 `Sandboxie-Plus` 。

早期的 `Sandboxie` 就被大量使用，效果非常好，如今开发方出做出了开源决定。

因此我们就说说它吧。



关于沙盒 `Sandboxie-Plus` 的运行原理，不说那些高大上的术语和概念，我们就简单地描述一下，大家能大概了解就行了。

`Sandboxie-Plus` 里跑程序，它可以很好地与主机计算机隔离。

那么它是怎么做到隔离的呢？

大概的原理，就是它通过在磁盘上划分了一块单独的区域，然后就让程序在这单独的区域内跑。

就好像孙猴子飞不出如来佛祖的手掌心一样，无论它怎么折腾，也不会影响到这个单独区域以外的地方。

当然还有其他的系统资源，比如内存或系统注册表之类的差不多也是这么干的。



下图右上，是正常情况下程序运行的样子，不排除程序会影响到其他区域的可能。

下图右下，程序跑在 `Sandboxie` 中，甭管两室一厅是大还是小，就只能在这房子里折腾，哪都去不了。

图01



纸上得来终觉浅，绝知此事要躬行。

说一千道一万，不如自己动动小手体验一下来得真切！

接下来我们实际用用这个 `Sandboxie-Plus` ，先从如何安装走起。

（安装包文末有下载）



双击安装包，`Plus` 版会自动选择当前系统的语言。

图02



同意安装协议，这个没毛病。

图03



我们选择直接在当前计算机中安装，提取文件只是用于制作便携式工具程序，并不是真的安装。

图04



安装的目标文件夹，一般默认的就行。

图05



开始菜单的快捷方式，保持默认。

图06



选择是否创建桌面快捷方式和下载最新 `Templates.ini` 模板和翻译，你喜欢就好。

图07



准备OK，开始安装。

图08



程序不大，一会儿就好，安装完成。

图09



首次打开沙盒 `Sandboxie-Plus` 会出现一个设置向导。

初识 `Sandboxie-Plus` 的小伙伴们最好不要跳过这个向导。

通常我们是个人使用，因此选择第一项 `个人(P)，用于私人非商业用途` 。

图10



来到序列号录入界面，还没来得及赞助，好像没有序列号，没关系不用填写也可以直接下一步。

图11



第一次用，老老实实选择新手模式哈。

图12



为了以后使用方便，建议安装系统集成选项，比如右键菜单中设置快捷打开沙盒之类等等。

图13



是否需要定期检查更新呢，这个你自己决定吧。

图14



OK，就这些了！

图15



现在安装完成，并且基本的设定也已经搞定，接下来我们就看看怎么用吧。

打开 `Sandboxie-Plus` ，新版界面还是比较简洁的哈。

图16



老习惯，先看看关于。

其实 `Sandboxie-Plus` 是通过命令行方式运行的，它的 `GUI` 则是用 `Qt` 编写的。

图17



既然要让程序在单独的磁盘区域内跑，那么我们就得先找块合适的地方，这就相当于制作一个沙盒。

我们可以新建一个沙盒，就等于划了一块地方。

不过 `Sandboxie-Plus` 默认已经有了一个沙盒，名叫 `DefaultBox` ，我们直接拿来用就行。

右键点击 `DefaultBox` ，依次选择 `运行` > `运行程序(Run)` 。

图18



很早以前就听说，中文版的 `WinRAR` 里面有点不可描述的东西，猜测可能有捆绑什么东西或是广告之类的。

挺好，干脆这次就拿来做实验吧！

提前到网上下载好中文版的 `WinRAR` 安装包。

注意哈，其他版本的 `WinRAR` 应该是没有那些个零碎，好像唯独中文版一看就不是什么好东西一样，请小伙伴们务必认准中文版。



好，继续 `Sandboxie-Plus` ，浏览到 `WinRAR` 安装包，点击确定开始安装。

图19



我们注意到沙盒内运行程序，它会在窗口四周围标记为黄色边框（有点警告的意思），并且窗口标题给加上了井号 `[#]` 来区分当前程序是在沙盒内运行。

继续安装 `WinRAR` ，就像平时安装它那样。

图20



`WinRAR` 安装好了，目前在 `Sandboxie-Plus` 窗口中还没啥特别的动静。

我们打开 `WinRAR` 程序，看看会不会有什么反应。

还是和前面一样的操作，右键点击 `DefaultBox` ，依次选择 `运行` > `运行程序(Run)` 。

找到 `WinRAR.exe` 可执行文件，然后运行它。

图21

图22



随着 `WinRAR` 程序的运行，里边夹带的广告也跟着蹦了出来。

在 `Sandboxie-Plus` 窗口中我们就能看到，它打开了 `Edge` 浏览器进程，其目的显而易见自然就是显示广告啦！

图23



我就不给广告截图了哈，大家知道有这么回事就行。

其实有的小伙伴可能知道，所谓的 `WinRAR` 中文版，只是国内某某公司将 `WinRAR` 加了广告重新打包而已。

OK，将广告关闭吧，`msedgewebview2` 进程随之消失，好像其他的进程倒也没有出现，目前看应该只是弹广告。

具体有兴趣的小伙伴们可以自行试验哈！





**Sandboxie-Plus.7z(61.3M)**

* `Sandboxie-1.12.5.zip` - 源代码
* `Sandboxie-Classic-x64-v5.67.5.exe` - 经典 `x64` 安装包
* `Sandboxie-Classic-x86-v5.67.5.exe` - 经典 `x86` 安装包
* `Sandboxie-Plus-ARM64-v1.12.5.exe` - `Plus` 版 `ARM64` 安装包
* `Sandboxie-Plus-x64-v1.12.5.exe` - `Plus` 版 `x64` 安装包
* `Sandboxie-Plus-x86-v1.12.5.exe` - `Plus` 版 `x86` 安装包



下载链接：





沙合皿博士的演讲非常成功，演讲结束台下爆发出雷鸣般的掌声。

关于 `Sandboxie-Plus` 你可以把它当作容器，也可以把它当作虚拟机，总之它还有很多有趣的内容。

有关于 `Sandboxie-Plus` 更多有趣内容，欢迎小伙伴们围观交流讨论！

今天先聊到这儿，我们下期再见！





**将技术融入生活，打造有趣之故事**

网管小贾 / sysadm.cc