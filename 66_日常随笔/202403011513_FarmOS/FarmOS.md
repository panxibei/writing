FarmOS

副标题：

英文：

关键字：





`FarmOS` 是一款挺有意思的 `Web` 应用，它可以帮助人们方便农业管理、规划与记录应用。

`FarmOS` 构建在 `Drupal` 的基础之上，虽然我也没怎么用过 `Drupal` ，但你可以简单地理解为像 `Wordpress` 差不多的基于 `PHP` 的内容管理系统，因此我们也就很容易理解 `FarmOS` 是专门提供农场管理功能的这么一个系统了。

它由生活在社区中的一些农户、开发人员、研究人员以及相关组织共同开发出来的，目的是更好地为人们提供一个用于农业数据收集和管理的标准平台。



这个 `FarmOS` 到底是个啥样子，里面都有点啥呢？

我也是初次了解，因此我先替小伙伴们蹚了蹚水，试试深浅。

有兴趣的小伙伴们接着往下看哈！



在初步了解 `FarmOS` 之前自然是想办法安装一个看看。

不过这玩意好像不太好装，并且限制较多，还好在自己的主机上可以部署。

好，先来看看安装配置要求吧。

* 要有 `Web` 服务，比如 `Nginx` 之类
* 要有数据库，`PostgreSQL` 或 `MySQL` 或 `SQLite`
* `PHP` >= `8.2`
* `MySQL` >= `5.7`



官网上要求挺多，而且 `PHP` 中还要一些特殊扩展，比如 `xmlrpc` 等，不太好搞。

一开始我在 `Windows` 下折腾半天，不得要领。

好不容易快看到希望，就差最后一哆嗦了，可惜哆嗦完了，然后就没有然后了。

尝试过了各种安装方式的失败（包括发行版安装和 `Composer` 安装），最后决定还是拿最简单，但又不那么简单的 `Docker` 方式来安装！



`Docker` 环境要事先部署，比较考验耐心，如果你已经有了 `Docker` ，那么直接上手就方便多了。

使用 `Docker` 安装，其中 `3.x.y` 是指版本号，比如 `3.1.1` 。

```
docker pull farmos/farmos:3.x.y
```



或者干脆不带版本号安装也是可以的。

```
docker pull farmos/farmos
```

不过官方并不建议使用这种默认最新版 `Lastest` 的方式来安装，究其原因是因为后续更新可能需要我们自己手动操作，难免会带来一些麻烦。



数十秒安装完成，接下来就可以运行 `FarmOS` 了。

```
docker run --rm -p 80:80 -v "${PWD}/sites:/opt/drupal/web/sites" farmos/farmos:3.x.y
```



如果系统提示端口冲突，那么可以这样改一个新端口（比如 `8088` ），注意前面那个才是外部端口。

```
docker run --rm -p 8088:80 -v "${PWD}/sites:/opt/drupal/web/sites" farmos/farmos:3.x.y
```



好了，打开浏览器，输入服务器的链接地址访问吧！

```
http://x.x.x.x/
```

或者你改过端口了。

```
http://x.x.x.x:8088/
```



这样就可以打开初始化安装向导程序界面了。

不过话说挺奇怪的，为啥我这儿直接跳过了 `选择语言` 和 `确认配置` 两个步骤呢（不知道是不是 `BUG` ）？

直接来到了第三个步骤，设定数据库。

图b01



在 `Docker` 安装方式下，这里的数据库服务必定是在外部的（相对 `Docker` 容器），我们可以点击那个高级选项 `Advanced options` 。

在这里可以指定数据库服务器的域名或 `IP` 地址，以及访问端口、数据表前缀等信息。

数据库设置没问题的话，接下来它就开始安装导入数据了。

图b02



数秒后我们来到了站点配置界面。

在这里我们可以给我们即将诞生的可爱农场起个萌萌哒的名字，然后再填写一些诸如邮箱、管理员等信息。

图b03



最后，安装你想要的一些模块。

我也是刚开始接触这玩意，不知道选择啥，就保持默认吧。

图b04



这个安装需要花点时间，不过也不算太慢，之后所有安装就可以全部搞定了。

图b05

图b06



点击 `existing site` 或是重新打开站点，我们的农场网站就可以开始使用了。

图b07



美中不足的是，由于地图需要用到 `GPS` ，而这个东东它是在墙外边的，因此一片空白没办法正常显示。

地图由 `OpenStreetMap` 提供服务，正常情况下它应该是这个样子的。

图b08



官网其实是有说明的，包括关于 `FarmOS` 域名注册，以及如何生成 `Google API` 密钥等。

因为地图是比较敏感的信息，因此也不太方便在这里展示了，有能力的小伙伴们请自行研究吧。

当然了，我在这儿留个链接，注意这是 `v1` 版本的，仅供参考。

> https://v1.farmos.org/hosting/apikeys/



好了，接下来我们就可以用 `FarmOS` 来管理我们的农场了。

比如添加一些资产，有牲畜、设备、土地、农作物、房子、水源等等。

图b09



然后再增加一些人员，比如工人和管理员。

图b10



具体的我也没操作过，大家伙可以自行体验哈！







