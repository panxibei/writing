ZIP压缩包伪加密

副标题：

英文：

关键字：













一个 `ZIP` 文件通常由三大部分组成：

* 压缩源文件**数据区**，以 `50 4B 03 04` 开头。
* 压缩源文件**目录区**，以 `50 4B 01 02` 开头。
* 压缩源文件**目录结束标志**，以 `50 4B 05 06` 开头。



这里我截了三幅图，各位可以对照着参看。



压缩源文件数据区，注意哈，这个不仅仅是在文件开头，只要有多个文件，那么其他地方也存在对应的文件数据区。

图c01



压缩文件目录区，可以简单地理解为存放的是压缩文件的索引记录。

图c02



压缩文件目录结束标志，与前者压缩文件目录区对应，形成一个文件的完美闭环。

图c03



光这么说，各位肯定得糊涂，还是画图为妙。

```
数据区1
数据区2
数据区N
……
目录区1
目录区结束标志1
目录区2
目录区结束标志2
目录区N
目录区结束标志N
……
```



对于压缩文件1，在 `ZIP` 文件里就是先放数据区1，再放目录区1和目录区结束标志1。

剩下的以此类推，好理解了吧？



接下来揭秘。





 数据区加密位置：偏移量为6即全局方式位标记，注意文件头位置从0开始，不是从1开始。



图a01





目录区加密位置，偏移量为8。

注意：压缩源文件目录区是由一系列压缩源文件目录记录所组成，一条压缩文件目录记录对应数据区中的一个压缩文件记录。



图a02



