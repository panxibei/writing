Sandboxie

副标题：

英文：

关键字：



“快！把门打开！想跑老子一枪崩了你！”，劫匪手持枪械穷凶极恶。

银行经理被踹得险些一个踉跄，只得战战兢兢输入密码刷了虹膜。

金库的大门瞬间被打开，劫匪们一股脑儿地涌入，面对着耀眼的黄金和花花绿绿的钞票口水直流……



领头的劫匪一声令下：“兄弟们，快给我装！”

话音刚落，他们眼前的黄金钞票忽地消失了！

劫匪们大吃一惊，愣在原地面面相觑，不知所措。

劫匪头子最先反应过来，就来抓那银行经理。

可他一回头，那银行经理也早已不知所踪！

大门被反锁，报警系统已然启动，刺耳的警报声此起彼伏……



“没错，这就是我们利用沙盒做的一次演习！”

“大家可以看到，沙盒为我们提供了一个安全的隔离环境，既保证了财产不受破坏和损失，又能让那些流氓强盗无处遁形！”

接着，沙合皿博士开始为观众们讲述起神秘的沙盒……



沙盒（英文：`sandbox` ），你也可以叫它沙箱，是计算机专业中的一个术语。

它为系统环境提供一种安全机制，可以为运行中的程序提供隔离环境，进而保护系统环境不受影响或破坏。

沙盒软件有很多，我们只拿其中一个举例：`Sandboxie` 。

如今 `Sandboxie` 已经发展到 `Plus` 版本了，叫做 `Sandboxie-Plus` 。

我们就说说它吧。



关于沙盒 `Sandboxie-Plus` 的运行原理，不说那些高大上的术语和概念，我们就简单地描述一下，大家能大概了解就行了。

`Sandboxie-Plus` 里跑程序，它可以很好地与主机计算机隔离。

那么它是怎么做到隔离的呢？

大概的原理，就是通过在磁盘上划分了一块单独的区域，然后就让程序在这单独的区域内跑。

就好像孙猴子飞不出如来佛祖的手掌心一样，无论它怎么折腾，也不会影响到这个单独区域以外的地方。

当然内存或系统注册表之类的差不多也是这么干的。



下图右上，是正常情况下程序运行的样子，不排除程序会影响到其他区域的可能。

下图右下，程序跑在 `Sandboxie` 中，甭管房子大还是小，就只能在房子里折腾，哪都去不了。

图c03



纸上得来终觉浅，绝知此事要躬行。

说一千道一万，不如自己动动小手体验一下来得真切！

`Sandboxie-Plus` 安装。



双击安装包，新版会自动选择语言。

图a01



同意安装协议，这个没毛病。

图a02



我们选择直接在当前计算机中，提取文件只是用于制作便携式工具程序。

图a03



安装的目标文件夹，一般默认的就行。

图a04



开始菜单的快捷方式，保持默认。

图a05



选择是否创建桌面快捷方式和下载最新 `Templates.ini` 模板和翻译，你喜欢就好。

图a06



准备OK，开始安装。

图a07



程序不大，一会儿就好，完成安装。

图a08



首次打开沙盒 `Sandboxie-Plus` 会出现一个设置向导。

和我差不多的初学的小伙伴们最好不要跳过这个向导。

通常我们是个人使用，因此选择第一项 `个人(P)，用于私人非商业用途` 。

图b01



序列号录入界面，还没来得及赞助，好像没有序列号，没关系不用填写也可以直接下一步。

图b02



老老实实选择新手模式哈。

图b03



为了以后使用方便，建议安装系统集成选项，比如右键菜单中设置快捷打开沙盒之类的。

图b04



是否需要定期检查更新呢，这个你自己决定吧。

图b05



OK，就这些了！

图b06



现在安装完成，并且基本的设定也已经搞定，接下来我们就看看怎么用吧。

打开 `Sandboxie-Plus` ，新版界面还是比较简洁的哈。

图c01



老习惯，先看看关于。

其实 `Sandboxie-Plus` 是通过命令行方式运行的，它的 `GUI` 则是用 `Qt` 编写的。

图c02



既然要让程序在单独的磁盘区域内跑，那么我们就得先找块合适的地方，这就相当于制作一个沙盒。

我们可以新建一个沙盒，就等于划了一块地方。

不过 `Sandboxie-Plus` 默认已有了一个沙盒，名叫 `DefaultBox` ，我们直接拿来用就行。

右键点击 `DefaultBox` ，依次选择 `运行` > `运行程序(Run)` 。

图d01



以前就听说中文版的 `WinRAR` 里面有点不可描述的东西，因此这次正好拿来做实验。

提前下载好中文版的 `WinRAR` 安装包，猜测可能有捆绑什么东西或是广告之类的。

注意，其他版本的 `WinRAR` 应该是没有这些个零碎，请小伙伴们认准中文版。

好，浏览到安装包，点击确定开始安装。

图d02



我们注意到沙盒内运行程序，它会在窗口四周围标记为黄色边框（有点警告的意思），并且窗口标题给加上了井号 `[#]` 来区别是否在沙盒内运行。

继续安装 `WinRAR` 。

图d05



`WinRAR` 安装好了，目前在 `Sandboxie-Plus` 窗口中还没啥特别的动静。

接着我们打开 `WinRAR` 程序，看看会不会有什么反应。

还是和前面一样的操作，右键点击 `DefaultBox` ，依次选择 `运行` > `运行程序(Run)` 。

找到 `WinRAR.exe` 可执行文件，然后运行它。

图d06

图d07



随着 `WinRAR` 程序的运行，里边夹带的广告也跟着蹦了出来。

在 `Sandboxie-Plus` 窗口中我们就能看到，它打开了一个 `Edge` 浏览器的进程，其目的自然就是显示广告啦！

图d03



我就不给广告截图了哈，大家知道有这么回事就行。

将广告关闭，`msedgewebview2` 进程也随之消失，其他的进程倒没有出现，目前看应该只是弹广告。



演讲台下爆发出雷鸣般的掌声，安全专家沙合皿博士的演讲非常成功。























**将技术融入生活，打造有趣之故事**

网管小贾 / sysadm.cc