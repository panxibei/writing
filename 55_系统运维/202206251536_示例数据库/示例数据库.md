示例数据库

副标题：示例数据库

英文：

关键字：









`tinyint` 类型只能表示 `0~255` 范围内的整数，可从这个字段的字面意思上看， `manager_staff_id` 好像是工作管理人员的编号，难道工作人员最多只有255个？

有点想不通为啥要在这儿将 `int` 变成 `tinyint` ，这里还牵扯到了索引并关联了其他表，好吧，干脆注释掉这一行试试吧！



创建 `staff` 表语句

大概第 `261` 行

```
staff_id INT NOT NULL IDENTITY,
```

修改成

```
staff_id TINYINT NOT NULL IDENTITY,
```



创建表 `store` 语句中

大概第 `289` 行

```
manager_staff_id INT NOT NULL,
```

修改成

```
manager_staff_id TINYINT NOT NULL,
```



创建表 `payment` 语句中

大概第 `313` 行

```
staff_id INT NOT NULL,
```

修改成

```
staff_id TINYINT NOT NULL,
```



创建表 `rental` 语句中

大概第 `340` 行

```
staff_id INT NOT NULL,
```

修改成

```
staff_id TINYINT NOT NULL,
```





测试 `SQL` 语句

图e01



再试试复杂一些的官网的示例语句

出演电影次数最多的演员（）

图e02



官网示例语句是 `PgSQL` 语法的，我们稍稍修改一下看看。

```
SELECT TOP 1 first_name, last_name, count(*) films
FROM actor AS a
JOIN film_actor AS fa
ON fa.actor_id=a.actor_id
GROUP BY fa.actor_id, first_name, last_name
ORDER BY films DESC
```

图e03









全店累计收入

图e05



这个语句不用怎么修改直接就能用。

```
SELECT payment_date, amount, sum(amount) OVER (ORDER BY payment_date) as sum
FROM (
  SELECT CAST(payment_date AS DATE) AS payment_date, SUM(amount) AS amount
  FROM payment
  GROUP BY CAST(payment_date AS DATE)
) p
ORDER BY payment_date;
```

图e04

