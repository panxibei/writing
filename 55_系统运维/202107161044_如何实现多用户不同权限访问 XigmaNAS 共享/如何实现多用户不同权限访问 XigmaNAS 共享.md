如何实现多用户不同权限访问 XigmaNAS 共享

副标题：让更多人同时使用网盘共享~

英文：how-to-access-smb-sharing-of-xigmanas-using-defferent-permissions

关键字：xigmanas,nas,smb,sharing,samba,cifs,readonly,writable,users



随着网盘使用逐渐向家用方向的日益普及，使得有不少网盘爱好者们对于其日常使用也越来越频繁。

在众多的网盘系统中，通常有部分系统是具备傻瓜式的操作界面，非常方便普通用户来使用。

不过也有对使用者要求更高一点的系统，比如 `XigmaNAS` 这一款，通常企业用得比较多一些，开个共享就有点折腾了，再复杂一点的可能就不敢多想了。

那为啥还要用它呢？

至少我个人觉得它是基于 `FreeBSD` 平台，稳定性够强，功能也不差，所以我还是坚持使用它。

最近有网友提问，是否可以将 `XigmaNAS` 设计搭建成如 Windows 下同时具备将多个用户分为只读或可写权限的共享。

不用说，答案是肯定的。



虽然我之前没有专用试过，毕竟我只有一个人，共享就以单用户的方式使用着，不涉及将权限分类的情况。

不过我知道，通常共享是基于 `Samba` 协议，所以我特意先查了一下资料，然后简单地测试了一番，基本可以实现用户只读和可写分离的要求。

下面就将我测试的步骤分享出来，有图形界面操作不会太难。



### 效果目标

首先我们先设定一个小目标或者叫最终效果，达到效果才算成功。

比如有两个用户帐户，分别如下设定来实现访问共享的不同权限：

* **user1    孔大力    可写权限**
* **user2    白小萌    只读权限**



### 建立用户

菜单 `访问` > `用户和群组` ，点击右下的加号来新建用户。

图01



输入 `登录名` 、`全名` 和 `密码` 后，需要将 `主要群组` 设定为 `wheel` ，其他保持默认。

点击 `添加` 按钮后 `应用更改` 使设定生效。

图02



如法炮制，可以新建 N 个用户，当然了我这儿的示例，新建了如下两个用户。

* user1    孔大力 
* user2    白小萌 



OK，不过这里需要注意一点，用户的共享权限并不是在创建用户这里设定的。



### 设置共享

菜单 `服务` > `SMB` ，点击 `分享区(Shares)` ，创建或编辑你想要设定的共享项。

图03



共有两处需要注意的地方，其他地方可根据实际情况自行调整。

**一处是，勾选 `设为只读` 。**

图04



**另一处是，最下方 `附加参数` 中，添加如下参数。**

`valid users` 指可有效访问共享的用户和群组（只读和可写权限都要在这儿），使用逗号分隔。

`write list` 指有可写权限的用户和群组（只有可写权限的在这儿）。

```
valid users = user1, user2, @group1, @group2
write list = user1, @group1
```



如果按本文中的示例，那么孔大力和白小萌都是有效访问用户，但权限是孔大力可写，而白小萌只读。

于是我们可以写成这样。

```
valid users = user1, user2
write list = user1
```

图05



当然了，你完全可以将相同权限的用户都放到一个群组中，然后在这里设定这个群组的只读或可写的权限即可。

设置完成后别忘记保存并应用更改。



### 效果确认

最后你可以找两台电脑，分别使用前面不同的两个用户身份来尝试登录连接共享。

然后再看看他们的权限是否满足读写权限。

最终正确的效果应该是，用户 `user1` （孔大力）可以上传下载或查看删除文件，而用户 `user2` （白小萌）则只能查看和下载文件。

其实挺简单的吧，我们完全可以用网盘来实现 Windows 下那种使用场景了。

好了，还没有搞定过的小伙伴们赶快去试一试吧！

如果小伙伴们还有什么疑问或需求，欢迎和我坐下来喝杯茶，我们慢慢聊一聊！



**扫码关注@网管小贾，阅读更多**

网管小贾的博客 / www.sysadm.cc