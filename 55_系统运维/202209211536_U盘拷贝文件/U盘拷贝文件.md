你丫凭啥怀疑U盘被人拷贝过文件？

副标题：你丫凭啥怀疑U盘被人拷贝过文件？

英文：

关键字：





最近不太平，没想到今晚又轮到我和小六子值夜。

上班前队长特地吩咐，丞相这几天心情不太好，昨晚又有人意欲行刺，结果丞相当机立断斩杀了那刺客，让我俩打起精神务必小心行事。



好不容易前半夜熬过去了，一点儿事没有。

正以为应该没事了，哪成想约莫后半夜四更天的样子，屋里有了动静。

我和小六子这心啊一下子都提到嗓子眼了！

“来人啊，快来人！有人动了我的 `U` 盘！”

我滴天啊，一时魂都飞了，我就压低声音喊小六子，一瞅，好么，这小子早已口吐白沫不省人事。

没招了，只好我自己一人硬着头皮进入屋内。



“丞...丞...丞相！请...请...请吩咐！”我壮着胆子说道。

“啪”的一下，飞过来一件东西甩我脸上。

我一捂脸，差点尿了，赶紧跪在地上，这才发现那东西是个 `U` 盘。



“肯定是那些老匹夫，趁我不在把我的小姐姐都拷了去！哇呀呀...给我查查是不是有人拷过我的文件！”

此时的我已然是老泪纵横，瘫软不得动弹，心中万分后悔干了这份要人命的差事，心想丞相唉，我上哪帮你查这案子去啊！

只见那愤怒的丞相一把拔出佩剑，唰地架在了我的脖子边上。

我只觉得一股暖流，两脚一蹬，“Duang”的一声重重地摔下了床。



我长出了一口气，心想这是什么乱七八糟的破梦。

把自己收拾利索之后，我突然回想到梦中的那个问题：能否知道别人拷贝过 `U` 盘里的文件呢？



好么，这么一折腾是睡意全无，干脆研究研究吧。

看似简单的一个问题结果却接下来折腾了我好几天，查遍了三山五岳、五湖四海，就差找观音菩萨了，最后得出结论是系统不记录 `U` 盘拷贝动作，因此没办法知道有没有人拷贝过文件。

那就真的到此为止了吗？



### 分析研究

你看哈，如果是从电脑上往 `U` 盘上拷文件，那电脑上至少还留有访问记录可循。

比如 `最近访问` 一项中就会看到哪些文件被访问过。

图01.JPG



就算是你清除掉了这些痕迹还是可以找到一些蛛丝马迹，这在我之前写的《系统偷偷保留的程序使用记录，你知道都在哪儿吗？》中有详细的介绍。

但是现在问题不一样了，就一光杆 `U` 盘，也没电脑，最多只有自己的电脑。

别人要是拿你 `U` 盘拷东西也不用到你自己的电脑啊，咱也更不可能去看别人的电脑有没有留下什么痕迹。

“您好！劳驾，看下您的电脑，我怀疑您偷偷拷我文件来着。”

这么说肯定被人打断腿啊！

这不行那不行，就真的没戏了吗？









### 不同分区格式下

我们这么想哈，拷贝文件那肯定是动过文件，那就多多少少会有一些变化吧。

经过我测试一阵后，发现文件的访问时间会起一些变化。

具体分析如下。



`FAT/FAT32` 格式下，即使你没有打开或操作这个文件，就算是单纯查看文件属性，其文件访问时间也会发生变化。

我们随便找个 `U` 盘上的文件试试哈，第一次右键查看属性，访问时间是这样式儿的。

图a01



看清楚了吗？

好，关闭这个属性窗口，然后不干别的，还是这个文件，再次右键打开文件属性。

你看看，它的访问时间立马变成了当前最新时间了！

图a02



OK，接下来看看 `NTFS` 格式吧。

和前面一样依葫芦画瓢，只通过查看文件属性来观察访问时间的变化。

第一次查看文件属性，确认访问时间是旧的。

图a05



好，关闭属性窗口，再次查看属性中的访问时间。

好么，啥都没干就更新了！

图a06



经过前后对比我们可以很清楚地看出，在 `NTFS` 分区格式下不但和 `FAT/FAT32` 分区格式下一样文件访问时间起了变化，而且还详细到了具体的时分秒。

啧啧，不愧是 `NTFS` 啊！



嗯， `FAT/FAT32/NTFS` 这些善变的家伙我们刚刚领教了，然而通常情况下 `U` 盘还有一种分区格式 `exFAT` ，它会是什么情况呢？

不试试怎么知道呢，来吧，前面的测试方法再来一遍。

第一次查看属性，访问时间确认是旧的没问题。

图a03



好，再次打开属性查看访问时间...哎...怎么没变化？

图a04



是我眼花还是操作有误？

其实都没问题，这个 `exFAT` 与前面那几位是截然不同，它的原则是，只要你不动它，它就不乱动，即使查看一下属性也是无伤大雅。

当然这里还有个小细节，就是 `exFAT` 和 `FAT/FAT32` 一样，文件访问时间没有具体到时分秒。



以上分析过的分区格式至少是 `Windows` 下 `U` 盘等移动设备的常见常用分区格式，至于 `Linux` 或 `MacOS` 等系统支持的分区格式不在本文讨论范围之内，有机会会再出文章研究的。

好了，到目前为止我们暂时可以得出一个结论，即使用 `FAT/FAT32/NTFS` 格式的 `U` 盘，在文件被拷贝之后其访问时间是一定会发生变化的。

即使没有做什么特殊的操作而仅仅是查看文件属性，系统也会更新当前文件的访问时间属性。

不过 `exFAT` 分区格式下任你怎么搞，也看不出来有什么变化。



那么得出以上结论后，我们对实际如何使用和保护 `U` 盘资料就可以有所选择了。

比如尽量将 `U` 盘格式化为 `NTFS` 格式，现在的 `U` 盘容量都比较大，完全支持 `NTFS` 格式。

这种格式可以使访问时间精确到时分秒，更加有利于我们判断文件是否被别人动过。

而通常 `U` 盘默认格式化的分区格式是 `FAT/FAT32` ，那么这种格式呢文件访问时间只能精确到日期，如果当天发生文件被拷事件就无法判断了。

最后最刚的就是 `exFAT` 格式了，不但日期不能更精确，而且它的访问时时还没变化，起不到判断的作用。



### 然而事情并没有那么简单

说到这儿，可能有的小伙伴会发现一个 `BUG` 。

如果怀疑有人拷贝了自己的文件，那我一旦查看了文件的属性，它不就又变化了？

为了不让文件访问时间无故刷新，有什么办法可以不用点开属性就能看到实际的文件访问时间呢？

为此，我自己做了一个小程序（文末下载），通过程序查看就不会影响到访问时间的变化。



比如，`FAT32` 格式的 `U` 盘，可以批量查看里面文件的各个时间，包括创建时间、修改时间和访问时间。

图b01



再来格式化成 `NTFS` 格式试一下。

图b02



访问时间精确到时分秒，非常棒！

图b03









即使是使用终端程序拷贝文件也会使文件的访问时间发生变化。

不信？我们来试试。

比如将`U` 盘 `X:\path\foo.xxx` 文件拷贝到 `C:\` 。

```
copy X:\path\foo.xxx C:\
```



拷贝前：

图c01



拷贝后：

图c02







### 写在最后





**将技术融入生活，打造有趣之故事。**

网管小贾 / sysadm.cc