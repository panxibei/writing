假如面试官出题，VirtualBox如何才能成功安装MacOS系统，你真的能搞定吗？

副标题：VirtualBox安装MacOS系统，想说爱你并不容易~

英文：hr-has-a-question-how-to-install-macos-in-virtualbox-successfully-can-you-do-it

关键字：virtualbox,oracle,macos,mac,macosx,苹果,vm



墙上的钟响了十一下，我睡眼惺忪抬眼望去，迷迷糊糊只见时针指向了十一。

我的天，我居然一觉睡到了大中午，不行得赶紧起来了！



我拉开窗帘，愣了一下，特么谁把我家窗户给涂黑了......

呃...好像能看到月亮哈！

什么？我去居然是晚上十一点！

我说我最近窝在家里老失眠怎么就突然好了呢！



正当我犹豫是否爬回被窝时，手机亮了！

这么晚了还让不让人睡觉了？

我拿起手机一看，是前不久投去简历的一家公司。

万万没想到的是，他们居然发来消息通知我去面试，不过时间却是现在！

What？没错，就是现在！



虽然面试机会来之不易我有些小激动，但却转念一想这什么变态啊，头一次听说半夜让人去面试的，我又特意看了看窗外。

可是最近我投的简历都是石沉大海、杳无音讯，都“毕业”好几个月了。

不过心里再一琢磨，要说现在也是机会难得，反正也睡不着了，就去瞧瞧呗！

最后才知道，这家公司就与我家隔条马路，步行不到1公里。

行吧，我就屈尊走上一遭！



简单收拾好背包，我很快来到了街上，此时的街道虽然灯红酒绿，却并不见一人，显得十分冷清。

不多久，我按照地址寻了过去，终于在两幢大楼之间找到了一个小门面，在一个不起眼的地方贴着一个导航箭头。

我顺着箭头所指方向走了进去，忽然从我身旁闪出一人，着实把我吓了一跳！

此人周身上下一套保安制服的打扮，年龄约莫65开外，见我进来便将去路拦住，口称山歌词：“唉唉唉，你找谁啊？请出示行程码、健康码和48小时核酸报告！”

这位大爷全程语气僵硬、面部表情麻木，似乎身上还有股子酒气。

我这才发现我忘戴口罩，慌忙一手掩住口鼻，一手打开手机。

之后一一验过，总算是过了这关。



在表明我是来面试之后，不多会儿来了一位自称是接待的小姐姐将我领进了一间小房间。

小姐姐让我在此稍等片刻后，随后就将我扔在这不足5平米的地方，陪伴我的只有一张破旧的小桌子和几把小椅子。

半个小时过去了，正在我疑惑是否被请来面壁思过之时，小姐姐风尘仆仆再次降临，面带微笑着说要带我去会议室面试。

我立马拎起唯一的家当背包紧跟其后，却发现小姐姐脚程了得，如一阵风似的走在前面是越跑越快，楼道是越走越弯。

渐渐地就在我体力不支的时候，前面的小姐姐竟然魔术般地消失在了走廊的尽头！

我大吃一惊，赶紧走近，就看到一扇大门上方挂着一块牌牌，上写“会议室”三个字。



哎，我心想，这应该就是那面试的会议室吧，于是抬手推门。

哪曾想任我怎么推，就算是使出全身之力，那扇大门却始终纹丝不动！

哎呀！我喘着粗气，心里就呐了闷了，那位看似弱不禁风的小姐姐是如何进去的，难不成是什么神仙高手？

正当我这犯嘀咕的时候，也不知是谁从我身后突然来了这么一嗓门：“小伙子，这门儿你得拽，往外拉才行哩！”

我本能地一哆嗦，回头观瞧，才发现也不知从哪儿冒出来一位清洁工阿姨，个头不高看着还挺面善的！

听完这位阿姨的话，我轻轻一拉这门，嘿，你说气不气人，它居然真的给拉开了！

我去，我鼻子差点没给气歪了，也许是我太紧张了吧，正想回头谢谢这位好心提醒的阿姨，却发现人已踪迹不见！



这都什么跟什么啊，这家公司的人怎么都这么神神叨叨、奇奇怪怪的！

也罢，我拉门走进会议室，只见室内灯光昏暗，一条长长的会议桌前隐约坐着七、八个人，最远处似乎站着的正是前面引路的小姐姐。

看我进门有点不知所措，坐在中间的其中一人发话，示意我坐在会议桌对面的椅子上。

我一看阵仗挺大，不敢马虎，立马打起精神，放下背包端坐在座位上。

中间这位便来了开场白，自称是本次的面试官，先来个自我介绍：“你好！我是本场的面试官。我是个好人，喝奥好，日恩人，好人的好，好人的人，简称 `HR` ！”

我这才注意到，对方是个戴着眼镜身形微胖的中年人，头上还戴了一个发箍（后来才看清是地方支援中央）。

接下来，这位自称好人的面试官询问了几个不痛不痒的问题，突然话锋一转，给我出了一道题：给你一台 `Windows` 系统的电脑，如何在上面安装 `macOS` 虚拟系统。

刚说完话，也不知从哪儿掏出来一台笔记本电脑递到了我的面前，意思是让我实际操作一下。

我一看，电脑上安装有 `VirtualBox` 虚拟环境，心说这个我熟啊，正好前不久我还在 `VirtualBox` 上安装过 `macOS` 系统呢！

于是我赶紧将之前的安装过程按照记忆原原本本地给操作演示出来。



### 系统环境准备

* 虚拟机：`VirtualBox 6.1.30`
* macOS系统：`macOS Catalina 10.15`



### 先来创建个初始的 `VirtualBox` 虚拟机

使用向导程序新建一个虚拟机，其类型是 `Mac OS X` 、版本是 `Mac OS X (64-bit)` 。

图01



在`系统` > `主板` 选项卡中，确保芯片组是 `ICH9` 、指点设备是 `USB触控板`，并且最好是启用 `EFI` 。

图02



在`系统` > `处理器` 选项卡中，切记**不要勾选** `启用嵌套 VT-x/AMD-V` 这一项，处理器数量可以随意。

图03



显存大小也可以随意，并不需要特意将其设置得很大。

图04



在 `存储` 一项中，先加载 `Catalina 10.15` 的安装光盘镜像。

随后点击控制器右侧的 `添加虚拟硬盘` 按钮来添加前面我们准备好的 `VirtualBox Boot.vmdk` 虚拟硬盘。

如果是第一次添加虚拟硬盘，则应该点击 `注册(A)` ，然后选择虚拟硬盘文件即可。

如果不是第一次添加虚拟硬盘，则可以直接在列表中选择相应的虚拟硬盘。

图05

图06



声音设置保持默认，当然你如果有特殊要求，那么就按实际情况调整设置。

图07



最后建议将 `USB设备` 设定为 `USB 3.0 (xHCI) 控制器` 。

图08



### 打磨一下这个虚拟机

前面我们新建了一个对于安装 `Catalina` 的虚拟机，可是这个虚拟机虽然它的类型是支持 `Mac OS X` ，但其实它还不能直接上手安装，直接上手是不会成功的。

那我们怎么办呢？

其实它还需要我们再打磨一下就可以用来安装 `Catalina` 了。

好了，我们下面就动手把它打磨一番吧！



以管理员身体运行一个 `cmd` 命令提示窗口，然后依次运行下面的命令。

```
# 命令中的 MacOS 为虚拟机的名字，请根据情况修改为虚拟机实际的名称。
cd %ProgramFiles%\Oracle\VirtualBox\
VBoxManage modifyvm "MacOS" --cpuidset 00000001 000106e5 00100800 0098e3fd bfebfbff
VBoxManage setextradata "MacOS" "VBoxInternal/Devices/efi/0/Config/DmiSystemProduct" "iMac11,3"
VBoxManage setextradata "MacOS" "VBoxInternal/Devices/efi/0/Config/DmiSystemVersion" "1.0"
VBoxManage setextradata "MacOS" "VBoxInternal/Devices/efi/0/Config/DmiBoardProduct" "Iloveapple"
VBoxManage setextradata "MacOS" "VBoxInternal/Devices/smc/0/Config/DeviceKey" "ourhardworkbythesewordsguardedpleasedontsteal©AppleComputerInc"
VBoxManage setextradata "MacOS" "VBoxInternal/Devices/smc/0/Config/GetKeyFromRealSMC" 1
```



经过这样的修改，我们就可以顺利安装上 `Catalina` 了。

如果在启动安装时失败，我们可以回过头来重新按顺序一行一行的执行这些命令，确保运行无误。



### 开始安装 `Catalina`

前面一切准备就绪后，我们就可以正式开始安装 `Catalina` 了。

启动顺利的话，我们应该可以看到如下启动画面。

图09



根据机器性能不同系统启动的速度也不同，可能需要多等待一会儿，启动加载一段时间后我们就能看到苹果的Logo。

图10



再过一会儿，`macOS实用工具` 界面就会呈现在我们面前。

图11



能看到这个 `macOS实用工具` ，就说明我们可以真正地开始安装进程啦！

在将 `Catalina` 安装到磁盘上之前，我们需要初始化磁盘以便匹配 `macOS` 系统格式，因此我们先点击 `磁盘工具` 。

图12



在 `磁盘工具` 界面中，我们在左侧找到目标磁盘，然后点击 `抹掉` 按钮开始初始化磁盘操作。

图13



默认系统格式为 `Mac OS扩展（日志式）` ，直接按下抹掉即可。

图14



磁盘初始化完成后，点击完成并关闭 `磁盘工具` 窗口。

图15



我们返回到 `macOS实用工具` 的主界面，接下来就可以点击 `安装macOS` 正式开始安装 `Catalina` 了。

图16



同意协议以继续安装进程。

图17



点选刚才初始化OK的磁盘，并点击 `安装` 按钮。

图18



接下来就坐等它将系统安装到磁盘上。

图19

图20



经过十几分钟的安装，系统会自动重启，然后再次等待数分钟后，我们就可以看到 `欢迎使用` 的画面了。

我们选择 `中国大陆` 后继续。

图21



`语言和输入法` 也选择默认继续。

图22



`数据与隐私` 选择继续。

图23



不传任何输信息，继续。

图24



如果你 `Apple ID` 就可以在此登录，如果没有的话就点击上方的 `稍后设置` 。

图25



同意条款与条件。

图26



创建电脑帐户，起个你喜欢的名字吧。

图27



快捷设置，按你的意思设置即可。

图28



不参与官方测试，直接继续。

图29



屏幕使用时间，你想怎么设置都行。

图30



喜欢什么样的外观，在这里可以先初步设定。

图31



最后系统开始收集并最终完成前面所有的设置。

图32



顺利进入桌面，不过还有一步，就是确认我们的按键布局。

系统需要我们先后按下左 `Shift` 右边的一个按键，以及右 `Shift` 左边的一个按钮。

图33

图34

图35

图36



最后，我们就完成了 `Catalina` 的全部安装，来看看虚拟机的当前配置吧！

图37

图38



最终系统启动效果。

图39.GIF



### 写在最后

以上就是我实际操作的过程，可完美将 `macOS` 系统成功安装到 `VirtualBox` 虚拟机上。

面试官见状不住地点头，表示对我非常满意，然后又询问我是否还有什么其他问题。

我正想问一下薪资待遇，突然不知怎么喉咙感觉有些异样，一时失声干咳了起来。

见我咳嗽不止，之前的那位小姐姐很贴心地给我端来了一杯开水。

我大为感动，接过杯子痛饮起来，正在这时，小姐姐忽然用一种类似于播音腔冲我喊道：“请戴好口罩，出示健康码，按次序排好，间隔一米距离，谢谢配合！”

我大吃一惊，坐了起来。

此时天已大亮，窗外又传来了熟悉的广播声......



**扫码关注@网管小贾，阅读更多**

网管小贾的博客 / www.sysadm.cc

