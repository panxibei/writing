XigmaNAS

副标题：

英文：

关键字：







跳电引发的故障。

噼里啪啦跳出一堆错误。

阵列被降级，有两块硬盘掉了。

图a03



最惨的是到了最后，说什么 `/conf/config.xml` 文件没找到，结果控制菜单都看不到了。

图a02





到网上下载最新版 `XigmaNAS` 镜像，然后选择升级安装，想着应该可以更新损坏的文件。



升级过程很顺利，损坏的文件也的确被修复，并且配置文件 `config.xml` 也被成功保留并迁移到新版本上。

但是，嘿嘿，就怕这个但是，结果一路开机顺利到最后，它它喵地还是提示我控制菜单不可用！

图b01



这怎么整？

后来我想起来了，为了避免有不法之徒直接操作 `XigmaNAS` 控制台， `XigmaNAS` 的确有一项设定是可以关闭控制台菜单操作的。

那这个设定会不会保存在配置文件 `config.xml` 中呢？

结果还真是，如下图，在之前的配置文件中有一项叫作 `disableconsolemenu` 。

```
<disableconsolemenu type="bool">1</disableconsolemenu>
```

图a01



OK，在控制菜单禁用画面按下 `Ctrl+Alt+F2` 开启一个新的终端，寻找 `config.xml` 。

结果我并没有在 `/conf` 目录中找到它的身影。

后来折腾了一会儿，这才发现新版的 `config.xml` 实际已经被移动到了 `/cf/conf/` 目录中。

好吧，改改看，结果它居然是只读的，好么，又是一个坑！

```
Unable to write to file, read-only file system
```



我仔细一看，不是文件只读，而是整个文件系统成了只读。

求助网络，发现可以通过重新挂载来让挂载点更新为可写。

具体这样做，很简单的。



首先确认挂载点名称。

```
mount
```

就这么一个命令，它会列出当前系统所有的挂载点及其是否只读情况。

从图中我们可以看出，挂载点 `/cf` 是只读的。

图b02



这个 `/cf` 不就是新版放 `config.xml` 的那个目录嘛！

好，接下来就将它更新为可写吧！

```
// mount -uo rw [挂载点名称]
mount -uo rw /cf
```

只要最后写对挂载点即可。

好了，最后我们就可以修改 `config.xml` 的文件内容了！

下图是我用 `vi` 直接修改的情况，可以做到保存文件啦！

图b03



最后重启系统，久违的控制菜单终于回归了！

图b04



