Hpe ProLiant Microserver Gen 10 安装 XigmaNas 无法启动

副标题：小白前进的道路上总会有些沟沟坎坎，不要怕跨过去就是了~



> WeChat@网管小贾
>
> Blog@www.sysadm.cc



最近想搞个NAS，网上搜了半天，发现有这么一款 `Hpe ProLiant Microserver Gen 10` 的NAS设备。

网上各种天花乱坠的功能介绍，其中居然说还能安装Win10当台式机用。

这个有点意思哈，对于一般非专业的用户倒是很容易上手，不过我使用的是 `XigmaNas` ，就是原来的 `NAS4Free` 。

看了好几款，最终综合考虑后，还是选择了它。

就是这货：

图1



等到入手后，才发现有坑等着我呢。

这货启动巨慢，假装自己是台服务器吗？

好吧，这个我能忍，但是开始安装 `XigmaNas` 时，我才发现无论怎么启动都会卡在一个地方不动，安装也就无法继续下去了。

无法继续启动，大概会提示这个样子：

```
pcib0: <ACPI Host-PCI bridge> port 0xcf8-0xcff on acpi0
pcib0: _OSC returned error 0x10
pci0: <ACPI PCI bus> on pcib0
```

图2



嗯？难道我拿到的是假货？还是硬件有问题？

重复启动N次，时间大量流逝，问题依旧，我哭~

你在搞我吗？连安装界面都进不去，还谈什么安装呢？

我有些出离愤怒，又有些后悔，硬着头皮上网搜搜看吧。

哎，你别看我废话这么多，还真被我找着了，只不过是在老外的网站上看到的。

To Fix the problem of Stuck Console Issue you should ......



好吧，我说人话。

虽然老外用的是 `FreeNAS` ，而我用的是 `XigmaNas` ，但其实都一样。

老外说了，首先原因其实是由于启动时某项参数错误导致的问题，可能是个BUG。

其次就是解决方法了，有这么几个方法。

1. WEB页面修改启动参数
2. 启动时编辑 `Grub`
3. 定制XigmaNas安装镜像



看到第一项时，我鼻子都气歪了，我还没装好哪儿来的WEB页面？

好吧，冷静一点，看样子第二项靠谱一些，试试看先。



1、重新启动，耐心等待 `Grub` 启动画面出现，按下 `e` 键。

2、在出现的参数列表项最后添加（如果你是安装在U盘上，那第二项务必也要添加）：

```
set kFreeBSD.hw.pci.realloc_bars=1
set kFreeBSD.hw.usb.no_shudown_wait = 1
```

就像下面这个样子，注意那不是下划线，它只是个光标：

图3

3、按 `F10` 继续启动。



好了，以上步骤虽然很简单，但的确能解决问题哦，系统顺利加载到安装界面，可以开始安装啦！

心情一下就变好了有木有，但就这样结束了吗？

No~ No~ No！

你还需要在安装好的系统中修正启动参数，否则安装完成后可能还是无法正常启动哦！

其实说白了，就是前面说到的三个方法中的第一个方法，在WEB页面中修正参数。



正常启动后登录到系统的WEB界面中，分别找到以下各项并修正参数。

```
# 系统 > 高级 > loader.conf
hw.pd.realloc_bars = 1

# 系统 > 高级 > sysctl.conf
hw.pci.realloc_bars = 1
hw.usb.no_shudown_wait = 1
```

给你看看图，参数分别像这样设置：

图4

图5



保存后再重启看看，是不是可以顺利启动 `XigmaNas` 系统了？

至于第三个方法，通过定制ISO镜像，这个过程太过复杂，不符合我等小白们应用为王的时间大师管理理念，就不在此介绍了。

下次有机会，我们会介绍关于 `UrBackup` 在 `XigmaNas` 上的安装使用，是一个针对个人主机备份的有效解决方案。

最后希望你的NAS安装顺利，使用愉快！

