VirtualBox安装MacOS

副标题：

英文：

关键字：



墙上的钟敲了十一下，我睡眼惺忪抬起头来，迷迷糊糊看到挂钟的时针已经指向了十一点。

我的天啊，最近老是失眠的我居然一觉睡到了大中午，这也太能睡了！

我起床拉开了窗帘，特么谁把我家窗户给涂黑了......

哦，好像能看到月亮哈！

什么？居然时晚上十一点！我说我失眠怎么就好了呢！

正当我犹豫是否爬回被窝时，手机亮了！

这么晚了还有人闹腾？

我拿起来一看，是前不久我投简历的一家公司。

没想到的是，他们居然通知我去面试，而且是现在！

我心想，这么变态啊，头一次听说半夜让人去面试的。

可是最近我投的简历都是石沉大海、杳无音讯，都好几个月了，要说现在是机会难得，反正也睡不着了，就去看看呗！

最后才知道，这家公司就与我家隔条马路，步行不到1公里。

好吧，说走就走！



我收拾好背包，来到了街上，此时的马路虽然冷清，但与白天并无两样，只是一个黑夜一个白昼。

不多久，我按照地址寻了过去，终于在两幢大楼之间找到了一个小门面，在不起眼的地方贴了一个导航箭头。

我顺着箭头所指方向进入，忽然闪出一人，把我吓了一跳！

此人周身上下保安制服的打扮，年龄约莫50开外，见我进来便将去路拦住，口称山歌词：“唉，请出示行程码、健康码和核酸报告！谢谢配合！”

全程语气僵硬、面部表情麻木。

我慌忙打开手机，一一验过，总算是过了这关。

在表明我是来面试之后，不多会儿就来了一位自称是接待的小姐姐将我领进了一间小房间。

小姐姐和我说在此稍等片刻后，就将我扔在这不足5平米的地方，只有一张小桌子和几把小椅子。

没料到我足足等了20多分钟，正在我疑惑是不是请我来面壁的时候，小姐姐风尘仆仆再次降临，满面微笑着说带我去会议室面试。

我拎起唯一的家当背包紧跟其后，却发现前面的小姐姐越跑越快，楼道越走越弯，渐渐地我有点体力不支。

最后，前面的小姐姐消失在了一条走廊的尽头，我大吃一惊，赶紧走了过去，就看到一扇大门上方写着“会议室”三个字。

我心想，这应该就是面试的会议室了吧，于是抬手推门。

哪曾想任我怎么推，就算是使出全身之力，那扇大门却始终纹丝不动！

哎呀！我喘着粗气，心里就呐了闷了，那位看似弱不禁风的小姐姐是如何进去的，难不成是什么神仙高手？

正当我这犯嘀咕的时候，也不知是谁从我身后突然来了这么一嗓门：“小伙子，这门儿你得拽，往外拉才行哩！”

我本能地一哆嗦，回头观瞧，才发现也不知从哪儿冒出来一位清洁工阿姨！

听完这位阿姨的话，我轻轻一拉这门，它居然真的给拉开了！

我去，我差点鼻子没给气歪了，正想回头谢谢这位好心提醒的阿姨，却发现人已踪迹不见！



这都什么跟什么啊，怎么都这么神神叨叨！

也罢，我拉门进入会议室，只见室内灯光昏暗，一条长长的会议桌前隐约坐着七、八个人，最远处似乎站着的正是前面引路的小姐姐。

看我进门有点不知所措，坐在中间的其中一人发话，示意我坐在会议桌对面的椅子上。

我一看阵仗挺大，也就立马打起精神，放下背包端坐在座位上。

中间这位自称是本次的面试官，他先来个自我介绍：“你好！我是本场面试官，我是个好人，喝奥好，日恩人，好人，简称 `HR` ！请你记住我！”

我点头示意，同时我也感觉到我的右脸颊微微地抽动了一下。

接下来，这位自称好人的面试官询问了几个不痛不痒的问题，突然话锋一转，给我出了一个难题：如何以最快的速度获得一台装有 `macOS` 系统的PC电脑。







最终效果

图test.gif



赶紧记录下来。



环境准备：

* 虚拟机：`VirtualBox 6.1.30`
* macOS系统：`macOS Catalina 10.15`



### 先来创建个初始的 `VirtualBox` 虚拟机

使用向导程序新建一个虚拟机，其类型是 `Mac OS X` 、版本是 `Mac OS X (64-bit)` 。

图a01



在`系统` > `主板` 选项卡中，确保芯片组是 `ICH9` 、指点设备是 `USB触控板`，并且最好是启用 `EFI` 。

图a02



在`系统` > `处理器` 选项卡中，切记**不要勾选** `启用嵌套 VT-x/AMD-V` 这一项，处理器数量可以随意。

图a03



显存大小也可以随意，并不需要特意将其设置得很大。

图a04



在 `存储` 一项中，先加载 `Catalina 10.15` 的安装光盘。

随后点击控制器右侧的 `添加虚拟硬盘` 按钮来添加前面我们准备好的 `VirtualBox Boot.vmdk` 虚拟硬盘。

如果是第一次添加虚拟硬盘，则应该点击 `注册(A)` ，然后选择虚拟硬盘文件即可。

如果不是第一次添加虚拟硬盘，则可以直接在列表中选择相应的虚拟硬盘。

图a08

图a05



声音设置保持默认，当然你如果有特殊要求，那么就按实际情况调整设置。

图a06



最后建议将 `USB设备` 设定为 `USB 3.0 (xHCI) 控制器` 。

图a07



### 打磨一下这个虚拟机

前面我们新建了一个对于安装 `Catalina` 的虚拟机，可是这个虚拟机虽然它的类型是支持 `Mac OS X` ，但其实它还不能直接上手安装，直接上手是不会成功的。

那我们怎么办呢？

其实它还需要我们再打磨一下就可以用来安装 `Catalina` 了。

好了，我们下面就动手把它打磨一番吧！



以管理员身体运行一个 `cmd` 命令提示窗口，然后依次运行下面的命令。

```
# 命令中的 MacOS 为虚拟机的名字，请根据情况修改为虚拟机实际的名称。
cd %ProgramFiles%\Oracle\VirtualBox\
VBoxManage modifyvm "MacOS" --cpuidset 00000001 000106e5 00100800 0098e3fd bfebfbff
VBoxManage setextradata "MacOS" "VBoxInternal/Devices/efi/0/Config/DmiSystemProduct" "iMac11,3"
VBoxManage setextradata "MacOS" "VBoxInternal/Devices/efi/0/Config/DmiSystemVersion" "1.0"
VBoxManage setextradata "MacOS" "VBoxInternal/Devices/efi/0/Config/DmiBoardProduct" "Iloveapple"
VBoxManage setextradata "MacOS" "VBoxInternal/Devices/smc/0/Config/DeviceKey" "ourhardworkbythesewordsguardedpleasedontsteal©AppleComputerInc"
VBoxManage setextradata "MacOS" "VBoxInternal/Devices/smc/0/Config/GetKeyFromRealSMC" 1
```



经过这样的修改，我们就可以顺利安装上 `Catalina` 了。

如果在启动安装时失败，我们可以回过头来重新按顺序一行一行的执行这些命令，确保运行无误。



### 开始安装 `Catalina`

前面一切准备就绪后，我们就可以正式开始安装 `Catalina` 了。

启动顺利的话，我们应该可以看到如下启动画面。

图b01



根据机器性能不同系统启动的速度也不同，可能需要多等待一会儿，启动加载一段时间后我们就能看到苹果的Logo。

图b02



再过一会儿，`macOS实用工具` 界面就会呈现在我们面前。

图b03



能看到这个 `macOS实用工具` ，就说明我们可以真正地开始安装进程啦！

在将 `Catalina` 安装到磁盘上之前，我们需要初始化磁盘以便匹配 `macOS` 系统格式，因此我们先点击 `磁盘工具` 。

图b04



在 `磁盘工具` 界面中，我们在左侧找到目标磁盘，然后点击 `抹掉` 按钮开始初始化磁盘操作。

图b05



默认系统格式为 `Mac OS扩展（日志式）` ，直接按下抹掉即可。

图b06



磁盘初始化完成后，点击完成并关闭 `磁盘工具` 窗口。

图b07



我们返回到 `macOS实用工具` 的主界面，接下来就可以点击 `安装macOS` 正式开始安装 `Catalina` 了。

图b08



同意协议以继续安装进程。

图b09



点选刚才初始化OK的磁盘，并点击 `安装` 按钮。

图b10



接下来就坐等它将系统安装到磁盘上。

图b11

图b12



经过十几分钟的安装，系统会自动重启，然后再次等待数分钟后，我们就可以看到 `欢迎使用` 的画面了。

我们选择 `中国大陆` 后继续。

图c03



`语言和输入法` 也选择默认继续。

图c04



`数据与隐私` 选择继续。

图c05



不传任何输信息，继续。

图c06



如果你 `Apple ID` 就可以在此登录，如果没有的话就点击上方的 `稍后设置` 。

图c07



同意条款与条件。

图c08



创建电脑帐户，起个你喜欢的名字吧。

图c09



快捷设置，按你的意思设置即可。

图c10



不参与官方测试，直接继续。

图c11



屏幕使用时间，你想怎么设置都行。

图c12



喜欢什么样的外观，在这里可以先初步设定。

图c13



最后系统开始收集并最终完成前面所有的设置。

图c14



顺利进入桌面，不过还有一步，就是确认我们的按键布局。

系统需要我们先后按下左 `Shift` 右边的一个按键，以及右 `Shift` 左边的一个按钮。

图c15

图c16

图c17

图c18



最后，我们就完成了 `Catalina` 的全部安装，来看看虚拟机的当前配置吧！

图c20

图c21







