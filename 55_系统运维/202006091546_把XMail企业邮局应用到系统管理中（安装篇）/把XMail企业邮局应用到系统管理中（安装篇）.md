把XMail企业邮局应用到系统管理中（安装篇）

副标题：简单易用才是应用之道~



在日常系统管理中会涉及到各种各样的设备，不外乎服务器、网络设备或打印机等等。

而当型号各异的它们数量渐渐增多、规模渐渐庞大时，管理好它们绝对是一种极其酸爽的感觉！

单单拿一台服务器来说，人工检查它的健康状态至少要包括诸如CPU使用率、磁盘阵列状态、内存利用率、UPS电源状况等等内容。

这还只是一些硬件方面的，软件系统方面的就更不用说了，你可以想像一下一位幼儿园老师要面对一群调皮捣蛋的娃儿们就心中有数了吧！

通常，娃儿们吃饭做游戏，自娱自乐还算听话，不过要是还没等你反应过来就出了状况，恐怕后果很严重。

那可不可以让娃儿们自己举手说，报告老师，我在玩滑梯，可能会摔倒？

要是那样的话，娃儿也就不是娃儿了，哪有那么聪明懂事的呢？

你还真别说，系统管理中就有可能，当然不是指娃娃啦！



通过邮局传递报警信息，可以第一时间预知或定位问题，事半功倍！

而邮局系统里当数 `XMail` 最简单、最好使了！

> `XMail Server` 简介
>
> `XMail` 是开放源代码的免费电子邮件服务器软件，功能强大稳定，兼容性好，可以运行在 `linux` 、`windows` 、`sun` 、`bsd` 等各种平台上。

开源免费多平台运行，够强大我喜欢，不过我们先在 `Windows` 平台上用用看。

接下来我会分享如何安装 `XMail` ，并且在文末分享给小伙伴们我总的一键安装方法（有下载）。

一键安装虽然方便快速，但既然学习一次，就认真了解一下，所以还是会简单扼要地介绍一下如何手动安装，也不难的哦！



> 系统环境：
>
> Windows 10 x64
>
> XMail Server 1.27



#### 一、下载 `XMail` 安装包

官网网址是 `http://www.xmailserver.org` ，但可能打不开，不用担心，它有多个镜像站点，速度会快很多，比如：`http://www.de.xmailserver.org` 。

官网安装包下载链接：`http://www.de.xmailserver.org/xmail-1.27.win32bin.zip`

当然了，文末的一键安装包里已经包含了官网的安装包了，你也可以直接使用。

图1



#### 二、安装 `XMail`

将 `xmail-1.27.win32bin.zip` 解压缩到某处，比如 `C:\xmail-1.27` 。

然后，



1、将其中的 `MailRoot` 目录（含所有文件）复制到C盘根目录下，就像这样 `C:\MailRoot` 。



2、将 `C:\xmail-1.27` 目录下的所有文件（不包含子目录）复制到 `C:\MailRoot\bin` 中。



3、打开注册表，在 `HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node` 位置创建 `GNU` 项，然后在刚建好的 `GNU` 项下面再创建 `XMail` 项。

在 `XMail` 项中，创建一个名称为 `MAIL_ROOT` ，键值为 `C:\MailRoot` 的字符串键。

这里有两点需要注意：

* 这里的键值要以前面第1点你放置的实际目录为准。
* 如果你的操作系统是32位的，那么注册表路径应该是 ``HKEY_LOCAL_MACHINE\SOFTWARE` 。

图2



4、右击 `此电脑` ，属性 > 高级系统设置 > 环境变量 。

在下面 `系统变量` 部分点击 `新建` 按钮，变量名填写 `MAIL_ROOT` ，变更值填写 `C:\MailRoot` 。

图3



#### 三、注册启动服务

`XMail` 支持以Windows服务形式运行，我们把它注册为服务，只需两条命令。

```powershell
# 切换到 bin 目录
cd C:\MailRoot\bin

# 注册服务
XMail --install

# 卸载服务
XMail --remove
```



依次打开`控制面板` > `系统和安全` > `管理工具` > `服务` ，双击服务列表中的 `XMail Server` 一项，选择启动类型为 `自动` ，并点击启动。



#### 四、简单测试一下

服务顺利启动后，我们可以先做个简单的测试，看看 `XMail` 是否能正常工作。

在开始测试前，你要先确保 `telnet` 命令可用。

依次打开 `控制面板` > `程序` > `启用或关闭 Windows 功能` ，在打开的列表中勾选 `Telnet 客户端` ，确定安装。

图4



有了 `telnet` 命令，我们就可以它来测试 `XMail` 了。

打开一个命令控制台，输入以下测试命令：



```powershell
# 测试发送（SMTP）的端口25
telnet localhost 25
```

返回如下内容说明工作正常。

图5



```powershell
# 测试接收（POP3）的端口110
telnet localhost 110
```

返回如下内容说明工作正常。

图6



到这里 `XMail` 已经成功安装完了，说简单好像也麻烦的哈？

没事，在文章最后有我做好的 **一键安装XMail程序包** 下载，在学会手动安装的基础上使用它会更加爽快！



好了，安装方面是没问题了，但是要真真正正地使用它，可能还远远没有结束哦。

正像上面测试的图片中你所看到的，它的域名是 `xmailserver.test` ，除此之外还有用户啥的，还需要进一步配置才可以为我所用。

在之后的文章中，我会分享 `XMail` 的配置及管理方法，把它具体地应用到实际系统管理中去。

有木有些期待呢？

咳咳......别忘了关注@网管小贾的微信公众号，第一时间推送给你哦！



最后附上，一键安装 `XMail` 程序包下载链接：



如果好用，记得转发分享，让更多的小伙伴们关注哦！

