我就不想开机按 F12 ，还能不能愉快地玩 UEFI 多系统启动呢？

副标题：我就不想开机按 F12 ，还能不能愉快地玩 UEFI 多系统启动呢？

英文：can-i-freely-boot-the-system-i-want-to-start-without-pressing-f12

关键字：uefi,efi,xor,xorboot,xorbootu,多系统启动,启动,引导,f12,batocera,mbr





前一阵给小伙伴们分享的 `Win10` 普拉斯复古游戏 `Batocera` 双系统制作教程可谓反响强烈，大家一致说好！

不过众多赞美之中冷不丁冒出个小伙伴提了个问题，“能不能开机时不按 `F12` 键，我就想自动出来个可选择的启动菜单，我想怎么选就怎么选”。



一开始我心想，这位大兄弟玩电脑时两只手都不够用了？

难道都忙着做啥不可描述的事儿，手都占完了？

后来我琢磨了半天，心想也对啊，换我也是躺在某跃高仿电竞轮椅上，一手端着可乐、一手握着手柄，这键盘着实它有点远哈！

再者说了，也不是每台电脑都能按 `F12` 选择启动项的，另外就算按这玩意有时手速特么还赶不上启动速度，时常上演“我还没有按，早已进桌面”的尴尬境地！

此情此景我不得不说，行，这活儿得干！

终于功夫不负有心人，还真让我找到了一款神器：`XorBooTU` ！



### `XorBootU` 简介

`XorBootU` 全称 `XorBoot-UEFI` ，是一款 `UEFI` 下轻量级图形化多系统引导程序。

根据我有限的资料调查，作者 `pauly` 感觉应该是位国人，`XorBootU` 开发至今也有好几个年头了，在此向作者致敬！

`XorBootU` 使用其实很简单并不难，但是很多像我这样的初学者有可能在初次使用时犯晕，因此后面会有详细的教程来讲解为大家解惑。



### 准备工作

`XorBootU` 是针对 `UEFI` 环境下使用的软件，因此我们也应该在支持 `UEFI` 的电脑和系统上测试使用，比如 `Vista` 版本以上系统。

当然我们现在最多使用的是 `Windows 10` 或 `Windows 11` ，至少我就在 `10` 上面测试OK了。

本文使用的 `XorBootU` 内核版本是 `0.2.4` ，外壳版本是 `2017.12.17` 。

图01



我将 `64` 位和 `32` 位的 `XorBootU` 主程序，以及之后会介绍的菜单示例等文件一起打包，放在这里供小伙伴们下载和测试使用。



**XorBootU_0.24-20171217.7z(4.27M)(含菜单示例)**

下载链接：https://pan.baidu.com/s/1cDi7cMHOBRbAbVyaaUeLQg

提取码：beg2



### `XorBootU` 怎么用？

虽然 `XorBootU` 看似不大、小巧玲珑的样子，但是对于初学者来说可能还是丈二高的和尚摸不着头脑。

别慌，其实它总体而言就分为两大块，我拆开揉碎了给你说道说道。



##### 头一个是 `XorBootU` 启动菜单。

它是指 `XorBootU` 自定义的它自己用来识别的菜单配置文件。

当我们启动 `XorBootU` 时，它就会读取这个启动菜单中的配置信息。

这玩意和 `Grub` 之类的菜单项很像，都是罗列了一些我们需要启动的项目，比如第一项是 `Windows 10` ，第二项是游戏，第三项是 `XXX` 等等。

具体里面怎么整的，一会儿后续会给你细说。



##### 还有一个是 `UEFI` 启动序列管理。

这个很好理解，就是 `UEFI` 自身的启动项管理，就是你开机时按 `F12` 出来的那些东东。

现在是不是有点明白了？

我们可以将前面说的 `XorBootU` 作为第一启动项，然后再通过 `XorBootU` 菜单中罗列多个不同的启动项即可实现多系统启动。

看下图我独家手工绘制，你应该很容易懂吧！

图02



有了大概的原理理解，我相信之后的操作就不会太难了！

OK！我们先来尝试制作 `XorBootU` 的启动菜单吧！



### 制作 `XorBootU` 启动菜单

这个启动菜单可以根据样式不同分为文本菜单和图形菜单。

顾名思义文本就是一些文字，图形呢就是图片组成的。

而图形菜单（概念上）相对比较复杂，我把它放在最后说明，我们先来说说文本菜单。

图03



整个启动菜单的设置就只有两个选项卡，一个 `全局设置` ，一个 `启动菜单` 。

全局设置中的参数对于我们初学者来说基本可以不用动，等到之后熟悉了再来调整也不迟，让我们先保持默认吧。



接着只剩下 `启动菜单` 选项卡了，它是为具体设置菜单项而服务的。

具体怎么做呢？

很简单，先点击右侧的某个启动项，然后再在左侧详细配置即可。

图04



**系统类型**

常规 `EFI` 应用程序(*.efi)，我们可以简单地理解为用于启动的 `efi` 文件。

这是我们通常选择的系统启动类型，只要指定相应的 `efi` 文件就可以实现 `UEFI` 启动。

其他几个选项则是针对一些特殊启动情况，比如 `VHD` 或 `WIM` 都是指找到镜像文件并启动之。

图05



**文件位置**

前面我们也说过，通常只要找到 `efi` 文件即可启动，因此这里可以根据实际情况选择文件位置。

同时设定 `磁盘` 、 `分区` 以及 `文件名` 来精准配合并定位启动文件所在位置。

从这一点上我们就能明白，任意磁盘或分区上都可以放上启动的 `efi` 文件，`UEFI` 启动方式可以非常灵活。

图06



**密码保护与启动热键**

给启动项加上一个密码，这个不用多说了。

同时启动项还可以设定热键，比如开机时按下数字键 `1` 即可代替方向键和回车直接启动这一启动项。

不过我试了一下，好像只能设定一位的数字或字母，并不能使用组合键，比如 `Ctrl+X` 这样的热键。

图07



**生成文本菜单**

这个很好理解，针对每一项启动项定制文本以及排序。

图08



在 `启动菜单` 选项卡的最下方，点击 `添加` 按钮来增加一个自定义启动项，并且将其上下移动到合理的顺位。

图09



就拿之前和小伙伴们分享的  `Batocera` 举例吧，我们将菜单项名称修正为  `网管小贾的 Batocera 游戏` 。

同时在 `系统设置` 区域设定好正确的启动参数，比如指定 `Batocera` 所在分区，指定这个分区上的引导文件 `bootx64.efi` 等等，具体可根据实际系统来调整这些参数。 

图10



最后确认一切无误后，点击 `保存` 将菜单项保存为一个文件，切记文件名为 `XorBoot.xor` ，文件所在路径为 `(esp/fat32)\EFI\XorBoot\` 。



**保存启动菜单**

这里需要进一步说明，菜单文件必须保存在如下目录中，`esp/fat32` 指的是 `ESP` 分区。

```
(esp/fat32)\EFI\XorBoot\XorBoot.xor
```



实际上你在保存菜单文件的时候就会注意到，`XORBOOT` 早已将 `ESP` 分区挂载成了 `Z` 盘。

这个 `Z` 盘只能在程序对话框中看到，在资源管理器里是看不到的，应该是程序自己挂载的，我们要做的只是顺着 `Z` 盘路径保存到上面这个目录中即可。

```
Z:\EFI\XorBoot\XorBoot.xor
```



切记 `EFI\XorBoot` 文件夹找不着也没事，是可以手动新建的。

图11

图12



OK！`XorBootU` 的菜单文件 `XorBootU.xor` 已经制作完成并保存在了相应的目录中。

接下来我们需要将 `XorBootU` 添加为 `UEFI` 的第一个启动项，来吧！



### 将 `XorBootU` 添加为 `UEFI` 第一启动项

我们想要添加 `XorBootU` 启动，那么必须有一个 `efi`启动文件，其实它已经帮我们准备好了。

我们点击 `UEFI 启动序列管理` ，在打开的界面中点击 `导出 XorBoot.efi` ，根据你的系统情况选择 `BootX64.efi` 或 `BootIa32.efi` ，通常我们选择 `64` 位那一项。

 图13



然后将生成的 `BootX64.efi` 文件保存到如下路径中。

```
(esp/fat32)\EFI\XorBoot\BootX64.efi
```



注意敲黑板啦，这个路径与前面的 `XorBoot.xor` 菜单文件不同，它并不是固定死的，可以放在任何可访问的其他地方，并且 `BootX64.efi` 这个文件名都可以随意修改。

不过只有一种特殊情况，要是放到 `U` 盘之类的移动设备上，那么必须遵守存放到如下的固定路径，并且文件名也必须保持不变。

```
(esp/fat32)\EFI\XorBoot\BootX64.efi
(esp/fat32)\EFI\XorBoot\BootIa32.efi
```

图14



保存成功，程序会接着询问你是否要立即添加 `BIOS` 启动序列，意思是要不要马上为刚才保存的那个 `BootX64.efi` 建立一个启动项。

这是天大的好事啊，节省时间，在这里我们当然选择 `是(Y)` 。

图15



唰的一下，名为 `XorBoot` 的启动序列就这样建立好了！

虽然我们可以手动建立它，但是很显然还是这样来得直接了当外加方便哈！

图16



如果想每次开机自动出现 `XorBoot` 的选择菜单，那么应该将它移动到顶部，就像这样。

图17



最后确认启动项涉及的磁盘、分区以及文件都没问题后，点击 `保存当前启动项设置(S)` 就可以完成任务了。

图18



OK，大功告成！最后启动画面大概是这样的。

图19



### 玩转图形菜单

`XorBootU` 功能强大，菜单项不仅支持中文显示，而且我们还可以用一些图片来装修美化启动画面，让自己更舒心、让家人更放心。

既然如此，那么问题来了，图形菜单的实现原理是什么呢？

我也研究了一下，在这儿给小伙伴们分享分享。



简单地讲，图形菜单与文本菜单的区别是没有输入文字的说法，取而代之的是我们只需要准备两张图片即可，所有操作都是围绕这两张图片展开的。

两张图片，一张是背景，一张是高亮。

这么说可能有的小伙伴会糊涂，其实用大白话说就是，一张用于非选中菜单，另一张则用于选中菜单。

两张图片中只有菜单项是不同的，其他部分都一样。

有了这两张图片后，在上面“画”上几个启动菜单项（文字图形都可以），然后再将这些“画”好的启动菜单项用框框圈起来，同时为这些框框指定相应的启动程序。

不知道大家能不能理解，不过别担心，我们下面实际演示操作一下就会加深理解的。



制作图形菜单有几个关键步骤。

##### 首先，菜单样式选择为 `图形菜单（真彩位图）` 。

图20



##### 其次，准备两张图片，按是否选中高亮分别命名为 `BACK.BMP/PNG` （非选中）和 `HILIGHT.BMP/PNG` （高亮）。

不知道大家理解不，我在网上截个图当示例吧，比如菜单项没选中是这样式儿的。

图21



选中了这个菜单就变个样子，总之能看得出来菜单项有变化就行，形式可以灵活多样。

图22



此外，注意图片还有一些特殊要求：

1. 文件名不区分大小写。
2. 后缀名必须为 `BMP` 或 `PNG` 。
3. 分辨率一般设定为 `1024x768` ，也可按启动画面分辨率调整。
4. 图片必须存放在 `efi` 启动文件的 `当前目录` 或 `\EFI\XORBOOT\` 目录下，通常最好放在后者所指目录中。



##### 图像菜单位置调整

背景图片准备就绪后，我们就可以调整菜单在图片中的位置了。

实际上其本质是选定图片中启动项区域，人为地指定选择区域应该执行什么启动操作。

如果找不到那个圈菜单的白框框也别着急，找到图像菜单位置中的左、上、宽和高，手动输入数值那个白框框就会出来了，然后你再用鼠标拖动就欧了。

图23

图24



菜单项区域选定好后，再调整启动参数，基本上就和文本菜单设定时差不多了。

最后来张动图效果图吧！

图25.GIF



### 写在最后

`XorBootU` 可谓是功能强大的启动制作神器，可惜本人美工方面处于白痴水平，所以演示画画较为简陋，还请大家见谅！

只要你多用用 `XorBootU` 马上就会熟练的，如果你有比我更高的艺术造诣以及欣赏水平，完全可以发挥想像，设计出更多更好看更带劲的启动画面哦！

最后不知道小伙伴们是否都学废了呢？

如果有什么疑问，欢迎留言评论。

关注我，勤转发，多点赞，么么哒！



**扫码关注@网管小贾，个人微信：sysadmcc**

网管小贾 / sysadm.cc



