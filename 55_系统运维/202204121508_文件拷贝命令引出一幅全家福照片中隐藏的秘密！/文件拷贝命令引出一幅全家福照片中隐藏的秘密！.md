文件拷贝命令引出一幅全家福照片中隐藏的秘密！

副标题：文件拷贝命令引出一幅全家福照片中隐藏的秘密！

英文：the-copy-command-leads-to-a-secret-hidden-in-a-family-photo

关键字：copy,jpg,filebinder,绑定,xjimgfilebinder





简睿和蔡学飞两人刚走进办公楼的大门，就发现来了几个生面孔似乎正和秦队在聊着什么。

一见师徒俩进来他们纷纷将目光投向了二人，很明显，这几个人肯定是冲着简睿他们来的。



秦队一边招呼着简睿，一边带着那几个人往队长办公室走。

简睿不明所以径直跟进了队长办公室，而蔡学飞则偷偷尾随其后，他想看看到底找他师傅有啥好事。



秦队见众人都到齐了，也不啰嗦，开门见山地向简睿介绍了来者是国安的同志，特地向他寻求帮助的。

原来就在昨天，国安安插在某犯罪组织的卧底人员在将工程图纸秘密带出时不幸遭遇了车祸。

目前人已被送往医院抢救，虽说暂时没有生命危险，但此时仍在抢救室观察，还无法与外界沟通联系。

警方目前也只能从他的随身物品中寻找线索，由于担心在执行任务中暴露身份，在送出资料的途中只带有一台笔记本电脑。

这台笔记本电脑就成了当前唯一有线索价值的物品，其中很有可能隐藏着我方急需获取的犯罪组织的秘密工程图纸。

可当警方打开电脑后却一无所获，除了几张全家福的照片之外并无其他可疑文件，并且也已排除了隐藏文件的存在。

情况紧急事关重大，上级领导指示必须第一时间找到图纸，这才辗转找到简睿请求支援。



简睿点了点头，接过了那部电脑后，秦队简单嘱咐了几句后就离开了。

看了一眼手中的电脑，简睿还没说什么，蔡学飞倒吐槽了一句：“师傅，您这又是要加班的节奏啊！”

简睿瞪了他一眼：“干我们这行的有哪天不加班的？少发牢骚，多干实事！”

蔡学飞撇了撇嘴，没敢再多说啥。



天已经黑了，简睿皱着眉盯着屏幕上的照片百思不得其解，至今还未有任何进展。

这时蔡学飞送来了盒饭，他想劝师傅先吃一口，歇会儿再工作。

简睿抬手一看表，可不，都快八点了，晚饭还没顾得上吃呢，肚子还真饿了。

蔡学飞心疼简睿，说道：“师傅，您先慢慢吃着哈，徒弟我先帮您老人家看看！”

简睿一边吃着一边回道：“别乱动啊，别误操作把电脑给搞坏了。”

蔡学飞笑道：“哪儿能啊！我可搞不定，我就瞅瞅！”

看着屏幕上的“全家福”照片，蔡学飞喃喃自语：“这就是那个什么卧底人员吧，啧啧，这一家子在一起真是温馨，现在倒好，可惜了可惜了......”

话刚说完，他又挠了挠头：“哎？师傅，你说卧底这位奇不奇怪，电脑里别的不放，就放这几张全家福照片。就这也就算了，怎么弄了半天这全家福都是一个样啊！你瞧......”

没想到就这一句话，简睿听后突然灵光一现，唰地直挺挺地立了起来，给蔡学飞吓一跳！

“没错！还真是啊！”简睿急忙咽下嘴里的一口饭，仔细观察着那几张为数不多的全家福照片，看来看去怎么都一个样子呢？

图01



虽说照片内容一样，文件名不同也算是合法的，但为什么这个人要这么做呢？



### 照片里的秘密

会不会这些照片里有什么不对劲的东西呢？

为了印证自己的猜测，简睿在自己电脑上找来了一张与“全家福”同样分辨率、同样大小尺寸的图片。

经过反复对比，令他非常奇怪的是，卧底人员电脑里的“全家福”照片容量很显然要比其他的图片大得多。

难道说...这些照片里真的隐藏着什么？

简睿提出了大胆的猜测，他手动修改了文件的后缀名并尝试将文件用压缩程序打开。

图02



令人震惊的事情发生了，照片里赫然藏着苦苦寻找的“秘密工程图纸”！

此时蔡学飞瞪大了眼睛，手指着屏幕差点叫出了声！

图03



### 图片怎么成了压缩文件？

当然，从文件大小来看，这些“图纸”只是整体的一部分。

那这些明明是图片的文件怎么就成了压缩文件呢，这到底是怎么一回事呢？



简睿忽然回忆起上学的时候，老师曾经讲过一个 `DOS` 命令：`Copy` 。

这是一个用于复制文件的普通得再不能普通的命令，但是可能有不少人并不十分清楚，它其实还可以用于拼接或连接文件。



通过如下命令，可以将两个甚至多个文件首尾连接成一个新的文件。

```
# copy 源文件A + 源文件B + ... 目标文件
# 开关 /A 或 /B 分别指以ASCII文本形式还是二进制形式连接
# 以二进制形式将FileA和FileB连接起来生成FileC
copy /B FileA + FileB FileC
```



而通过这种方式连接后产生的新文件往往看上去和第一个源文件很像甚至是一模一样的。

怎么理解这事呢？

我们都知道，破坏计算机的程序叫做病毒，那为啥叫病毒不叫细菌呢？

因为自然界的病毒是寄生在其他正常生物细胞中才能存活的，而计算机病毒和这个类似，它是在正常文件后面接上一段病毒代码，从而保证正常文件执行时可以顺序激活它。

其原理就如自然界的病毒一般无二，因此而得名。

于是乎早期的病毒检测手段基本上都是通过检查文件长度是否异常来判断是否含有病毒代码的。

当然了，现在这种严格意义上的计算机病毒已经基本销声匿迹了，从原理上讲现今木马之类的流氓软件本质上是不能被称为病毒的。

而 `copy` 命令正是基本这种原理可以将文件连接起来的工具。

图04



### 验证文件

为了进一步证实自己的猜测，简睿将照片用压缩工具打开后查看其文件属性。

图05



果不出所料，这是一个精心包装过的压缩文件，只不过表面看上去是幅图片罢了。

图06



从图片中可以看到，压缩文件的格式实际上是 `7z` ，同时它的实际内容并不是从头（字节1）开始的，而是有偏移量的。

这个偏移量值正是原始图片的大小，也就是说，压缩包被完完整整地放到了图片的后面。

这一点可以通过查看原始图片的大小来验证。

图07



### 水落石出

简睿长出了一口气，事情到了这里，似乎已经很清楚了。

卧底人员在情况成分紧急之下，为了防止资料遗失或暴露，利用有限的条件，在电脑上直接使用 `copy` 命令“加密”了秘密文件。

由于时间仓促，他可能只用到了同一张照片，致使所有的文件都很奇怪地显示为同一张“全家福”。

蔡学飞挑起大拇指笑说：“师傅，今天收工有点早哈！”



### 写在最后

这种“加密”方法虽然比较原始，不过它利用了压缩文件，如果想要进一步保证安全的话，给压缩文件加上密码可能会更加保险。

作为小规模加密自己的隐私文件，打个 `copy` 命令做些来也不是很难。

我根据本案例，自己动手攒了一个图片加压缩文件绑定程序，免去了手动打命令的麻烦。

图08

图09



使用方法很简单，先选择图片，再指定压缩文件，最后点击 `开始绑定` 即可生成新文件。

新文件表面看上去是图片，实际里面隐藏了压缩文件。

同时程序也加入了解压测试功能，方便测试新文件是否能正常将加密后的文件释放。



**XJImgFileBinder.7z(864K)**

下载链接：https://pan.baidu.com/s/1LkjycuokeNbCXpl1DbArXQ

提取码：3wxc



有兴趣的小伙伴们可以拿来试一试哦！

如果程序好玩的话，请帮忙转发、分享，点赞、再看也别忘记哦！



为防止公众号失联，请加我的个人微信：**sysadmcc**。

**扫码关注@网管小贾，阅读更多**

网管小贾的博客 / www.sysadm.cc
