我说的是真的，我居然用ZeroTier把村里各家的电脑整成了一个“局域网”！

副标题：无论什么地方的电脑都能组成“局域网”的神器：ZeroTier

英文：what-i-said-is-true-i-used-zerotier-to-make-villagers-computers-into-a-local-area-network

关键字：zerotier,one,local network,network,vpn,qq,局域网



村里刚通网的时候，越来越多的人用上了电脑。

勉为其难地帮村里几位捣鼓好了电脑之后，也不知是声名远播还是咋的，我这学计算机学了个半调子的人就被扣上了一顶“电脑专家”的帽子。

这十里八村的不管早晨晚上，也不管刮风下雨，时不时地就总有人来嘘寒问暖，真可谓是络绎不绝，门槛都快踏破了。

就比如前两天，实然来了个毛头愣小子手抱机箱堵我家门口。

这小子来两回了，非要让我帮忙看看电脑，我心说你小子是不是又看小电影了？

你老是这么干我可管不了！

说来也巧，正说话这功夫，我接到同村一位小姐姐的电话，说是她的电脑也出了点问题。

搞什么啊，就算是小姐姐我也是一样的态度，我就斩钉截铁地回复她说，我马上到！



为人民服务我心里甜啊！我骄傲！

好吧，这乡里乡亲的，咱也不好意思拒绝对吧，于是就这样一天天地混到了疫情来临的今天。

本以为上门的人会少很多，哪曾想，我还是低估了人民群众的智慧啊！

来吧，远程视频解决问题！

不过你丫的别光说不练，举着个手机倒是对准屏幕让我看清楚啊！

呐尼？你切换前置镜头都不会？

你又不是小姐姐，我老盯着你脸看怎么修电脑？

用 `QQ` 吧，我远程连上来帮你看。

什么？已经好久没用 `QQ` 了，号码都忘了！

What Fx 哔......



好吧，人有多大胆，地有多大产，于是我就开始琢磨了，要是能把这些人的电脑都放进一个“局域网”中统一管理就好了，就算远程啥的也方便啊！

是我在痴人说梦吗？

有的小伙伴要说了，怎么可能将这些分散各处的电脑变成“局域网”啊，还说什么可以随时随地联网远程访问？

退一万步讲，就算可以组网，那不得每家每户还要增加网络设备比如 `VPN` 啥的嘛，这不天方夜谭吗？



好了好了，安静，冷静，稍息，坐下！

我也不瞒你们，是时候祭出 `ZeroTier` 神器了。

我疯没疯，接着往下看就知道了！



### `ZeroTier` 介绍

“安全连接任何设备、任何地方”，是 `ZeroTier` 官网首页的一句非常简单的宣传语。

这句话看似简单，实则并不简单，`ZeroTier` 可以在任何云、桌面以及移动设备等等端点之间建立安全网络，从而可使各个小组成员通过 `ZeroTier` 就能轻松连接并访问世界上任何地方的任何设备。



> `ZeroTier` 官网：https://www.zerotier.com/



听上去好像挺神奇的哈，不过光嘴上说可能对小伙伴们来说有点笼统没什么概念，干脆我画了张简单的示意图。

图01



虽然图画得简单了些，但大体的意思应该比较明了。

其实我们从图中可以看出，实际上这个 `ZeroTier` 我们可以理解为一个超级大的 `Hub` ，它将各个设备都连接在了一起，最终形成了一个大的“局域网”。

只不过这个“局域网”的各个设备终端都分布在世界各个不同的地方罢了。

在这个由 `ZeroTier` 组建的“局域网”中，任何作为成员的设备都可以互访，也就是说，这些设备可以实现非常方便的直接共享数据、远程访问等功能。



很好理解吧？

而且将设备连接到 `ZeroTier` 是不需要什么专用设备的，安装上 `ZeroTier` 提供的程序就可以了，简单易用非常方便。

另外，能在任意设备上跑 `ZeroTier` ，那么自然它是支持多个系统平台的，包括 `Windows` 、`Linux` 、`MacOS` ，而且还包括多种 `NAS` 系统以及路由器系统，甚至还包括 `iOS` 、 `Android` 等移动设备系统。

既然 `ZeroTier` 支持那么多的设备平台，那接下来我们就拿 `Windows` 版本的程序来为小伙伴们演示一下如何使用 `ZeroTier` 吧！

准备好了没，Let's go！



### 注册帐户

要想让我们的电脑设备连接到 `ZeroTier` ，那么我们先得有一个官方帐户才行。

通过这个帐户的设定，我们就拥有了一个或多个网络ID，然后我们的设备就可以通过识别这个网络ID连接到 `ZeroTier` 上了。

我们可以简单地理解为，一个网络ID就可以组建一个“局域网”。



`ZeroTier` 有好几个不同类型的帐户，有开源版、基础版、专业版以及企业版。

其中开源版和基础版是免费的，而专业版和企业版是收费的。

图02



从图中我们可以了解到，各版本帐户之间的区别主要是**网络成员数量**以及**管理用户数量**的区别。

开源版本可以拥有无限网络成员数以及无限管理用户数，但只限非商业也就是仅为个人使用。

如果你是个人使用，那么肯定选择开源版本，如果你是企业或商用，那么应该选择后者。

好了，我们作为演示，自然先拿开源版本小试牛刀了。



打开官网首页，点击右上角的 `Sign Up` 注册。

图03



在注册页面中，我们按要求填写内容即可，也可以使用第三方帐户注册。

图04



注册完成后，我们会收到含有帐户激活信息的邮件，赶紧去邮箱看看吧！

图05



激活帐户后我们再次登录 `ZeroTier` ，即可开始创建我们的网络。

图06



### 新建属于自己的 `ZeroTier` 网络

点击 `Create A Network` 创建网络，什么都不用填写系统会立马自动生成一个。

图07



虽说新建的这个网络，它的 `Network ID` 和名称都是随机生成的，但这个 `Network ID` 是不能修改的，并且我们必须牢记它，待会就会用到，而网络名称是可以修改成我们喜欢的样子。

通过点击新建的 `Network ID` 或名称，我们可以查看并修改其中的各种配置。

如图所示，除了名字可以修改之外，我们还可以指定设备成员连接到这个网络中是否需要认证。

图08



`PRIVATE` 私密，表示需要认证，这是默认设置，要不只要知道 `Network ID` 谁都可以连上来了。

而 `PUBLIC` 公开，则表示可以任意连接上来，但满30天后就会被踢出去，也算是一种比较人性化的安全措施吧。



我们还可以像在路由器或防火墙中添加额外的路由信息一样在当前网络中添加路由。

图09



进入网络中分配给设备的虚拟IP地址，是的，就是“局域网”中各成员设备的IP地址，有点像VPN虚拟地址似的。

我们可以在这里选择任意网段，C类、B类挑你喜欢的就是了，这个功能挺不错的。

图10



`IPv6` 的设定，一般不用动（骚瑞，其实是我不懂）。

图11



还是地址段设定，广播域或 `DNS` 设定，通常不用管它。

图12



流量规则，就像通常所见的交换机或防火墙上管理流量一样，一般情况下没有特殊要求我们也不用动它。

图13



基本上新建 `Network ID` 后并不需要我们刻意去改动什么就可以使用了。

好，`Network ID` 准备好了，接下来我们就要让电脑设备加入这个网络。



### 在 `Windows` 上安装 `ZeroTier`

从官网上下载 `Windows` 版本的 `ZeroTier` 。

> 官网下载：https://www.zerotier.com/download/

图14



为方便小伙伴们，我这儿放几个安装包供大家下载，版本均为 `1.8.4` 。

**ZeroTier One.msi (13.0M)**

下载链接：https://pan.baidu.com/s/1D8kFxEa75C5kzISBIWIz_Q

提取码：ks17



**ZeroTier One(Win7).msi (15.8M)**

下载链接：https://pan.baidu.com/s/1QMXvocvqqMQHHD6_BOK50Q

提取码：dd9b



**ZeroTier One.pkg (4.25M)**

下载链接：https://pan.baidu.com/s/18aDumV401rHQbVIVI4jT8g

提取码：j55q



**ZeroTierOne.apk (11.3M)**

下载链接：https://pan.baidu.com/s/1FE8vHxMN2V-qaKUQ9zywOA

提取码：ng92



下载好后，请务必确保你的电脑能正常联网，否则在安装时可能会报错，从而导致安装失败。

图15



即使强行安装也是没有用的，之后就算是重新联网也会导致程序工作不正常。

图16



此外，在安装前还需要事先安装好 `VC++` 组件。

图17

图18



我给大伙准备好了，`2015-2022` 整合版，一次搞定。



**vcredist_2022_x64&x86.7z (33.55M)**

下载链接：https://pan.baidu.com/s/1_JKMMrfQcG1RWFUA0EiX5w

提取码：265a



安装完成后，我们会发现它生成了一个名叫 `zerotier-one_x64.exe` 的进程服务。

图19

图20



同时桌面右下角的任务栏中也会自动启动 `ZeroTier` 图标。

右键点击它会弹出相应操作的菜单项，最上面一行则是区别于其他设备的本机地址号。

图21



并且在网络设置中，我们也可以找到 `ZeroTier` 帮我们新建的一块名为 `ZeroTier One` 的虚拟网卡。

图22



我们右键点击任务栏图标，选中 `About` 关于，在弹出的窗口中能看到 `ZeroTier` 的开源项目链接。

图23



### 将 `Windows` 电脑加入到 `ZeroTier` 网络中

我们右键点击任务栏图标，选择 `Open Control Panel...` 打开控制面板一项。

在控制面板中，我们可以看到本机的地址号 `ZeroTier Address` 、软件版本 `Version` 、在线状态 `Status` 以及首要端口号 `Primary Port` 。

图24



在窗口的右侧显示着当前我们还没有加入到任何网络中，那我们就动手加入 `ZeroTier` 网络吧！

还记得前面我们新建的网络ID吗？

对，就是那个 `Network ID` 。

好了，赶快将这个 `Network ID` 填写在控制面板下方的文本框内，然后点击 `Join Network` 加入网络吧！

图25



只要网络通畅，不一会儿的功夫网络加入就完成了！

就像下图这个样子，其实你也能看出来吧，它完全可以加入很多不止一个的网络。

图26



为了确认刚才加入网络是否真的成功，或者我们可能对当前这台设备有一些特殊的配置需求，所以我们还需要跑回到 `ZeroTier` 官网，登录并查看一下设置状况。

哈哈，它提示我们有一台设备已经加入到我们的网络中了。

图27



将设备加入到网络就是这么简单，不过除了让设备去找 `ZeroTier` 网络并加入之外，从官网页面也是可以主动添加远端设备的。

只要将设备的本机地址号（也就是右键任务图标弹出菜单的最上面那一项）填写到添加成员的文本框内就可以了。

好像有两个地方都可以添加。

图28

图29



OK，添加超简单，但是你要是认为添加上就能用了可就大错特错了哦！

因为这些设备在正式连接网络之前还需要管理员的认证，因为我们前面设定的是私有 `PRIVATE` 网络，所以说这一步是必须的哦！

如下图最左侧一列，我们必须要将 `Auth?` 一项勾选上才算认证通过，否则可是怎么连都不会成功的，注意注意啊！

图30



### 拿两台电脑实际试验一下

说得再多也只是理论，我就亲自拿来两台 `Windows` 电脑给大家开开眼。

找到第一台，顺利加入 `ZeroTier` 网络，我们再点击图标就会发现它多了一项，这一项正是当前连接的网络ID项。

图31



我们顺着菜单项，再将鼠标滑到 `Managed Addresses` 就能看到本机当前的虚拟IP地址。

顺便 `Ping` 一下，肯定是通的，本机的IP肯定没问题了。

图32



如果不放心，我们可以打开网络设置，查看虚拟网卡当前的设置。

图33



如法炮制，同样在第二台电脑上依次设定，同样获取到虚拟IP地址。

图34



好了，两台电脑都加入了同一个 `ZeroTier` 网络，最快的判断它们有没有连通的方法就是用 `Ping` 命令。

结果OK，两边都可以 `Ping` 通对方，如果有 `Ping` 不通的情况，请检查一下防火墙是否开启禁 `Ping` ，这里图我就不放了。

而我们查看它们的路由就像真的是在同一局域网内，中间都没有经过什么IP一样。

图35



好了，接下来我干了，你们随意，什么远程桌面啦，什么共享访问啦，统统招呼上，都试试哈！

你看看，什么域名解析，什么VPN，都不必care了，可能速度没有真局域网快，但其他的基本上都没问题吧！

OK，就这样完美搞定！



### 写在最后

实际上 `ZeroTier` 支持的远不止 `Windows` 或 `Linux` 这些常见平台那么简单，移动设备甚至是网盘、路由器系统都有所涉猎。

据官网最新消息，`ZeroTier` 已经作为日常应用可以被安装在 `MicroTik` 上了，并且它还在继续发展壮大中。

关于手机之类的移动设备，亦或是 `OpenWRT` 之类的路由系统，更或是群辉、`QNAP` 等等的网盘系统 ，在它们上面的安装和连接就权当课后作业留给小伙伴们自己研究折腾吧。

当然如果以后有空或有需要，我也会抽空写一写继续补充。



最后说一说村里的情况，自从用上了 `ZeroTier` ，可以说免去了跑腿的麻烦，并且还不用纠结诸如 `QQ` 啊向日葵不能用的麻烦情况，就算直接远程桌面那也是真的香啊！

当然了，`ZeroTier` 得意于去边缘化网络的思想，它的“局域网”模式还可以推广到众多企业使用。

比如数家子公司或办事处分布在各个不同的城市中，就可以将它们整合成一个“局域网”，这样传输数据、打印文档就像在一个地方，神奇而强悍！

如果你对 `ZeroTier` 感兴趣，那就赶快去官网注册一个研究一下吧！

好了，点赞、在看、分享时间到，小伙伴们请自觉行动，要不我要点名了哦，哈哈！

最后，祝你们拥有一个完美体验！

下期再见！



**扫码关注@网管小贾，阅读更多**

网管小贾的博客 / www.sysadm.cc
