亲，还在手动U盘杀毒吗？全自动U盘杀毒了解一下！

副标题：U盘杀毒也搞自动化~



中秋国庆双佳节，举国欢庆之际，惊闻川建国同志身染新冠病毒。

我等吃瓜群众悲恸之余打出了个大问号，米国的医疗不是很先进吗，大统领怎么会...？

呵呵，不要小看了大美利坚，其医疗特色之一正是江湖上无人能敌的“快速核酸检测”，要不建国同志怎么老拿检测率说事呢。

米国的医疗实力的确强悍，据新闻报道最快2分钟就可完成一次检测，堪称医疗界的奇迹！

得益于此，不出三日建国同志便又好端端地站在了他的拥趸面前，就像不曾有什么异端发生过一样。



看到了吧，这就是自动化工业时代的力量！

什么，你说什么？

工业自动化你知道，但标题所说的 **U盘自动杀毒** 闻所未闻？

好吧，我们不得不承认的是，如今即使网络再发达，却仍然存在着一些需要使用到U盘的场景，比如没有网络的车间现场，比如与外部人员资料的交换等等。

时间久了，你会发现在管理上变得越来越混乱，U盘防毒也成了最头大的问题。

阿弥陀佛，施主莫急，贫僧正是来解救你的。

请看！



## 基本原理

图1



从图中可以看到，U盘在接入客户端PC之前必须要先杀毒，否则无法正常使用。

基本原理就这么一句话，简单好理解，但具体是怎么运作的呢？

我们来看另外一张图。

图2



这张图看似复杂，其实也没那么复杂，我们来分析一下。



##### 一、首先，看到没，中间有一只可爱的小U盘。

将它作为起点，把它接到上面的那台杀毒电脑上查杀病毒。

当然了，系统是自动判断是否有U盘插入，然后又自动开始查杀病毒，全程无需额外手动操作哦！



##### 二、杀完毒了，得到两种结果。

一种是检测出病毒（图中向左流程），那么不好意思，U盘并没有通过检测，于是被锁定，即使接入到客户端也无法正常使用。

另一种则是检测正常没有发现病毒，U盘确认通过检验，可以接入客户端正常使用。

当然如果你一开始就没去杀毒，而是直接将U盘接入客户端，那肯定也是无法正常使用的。



##### 三、就这么简单？当然不是啦，后面还有哦。

以下几种情况下，U盘即使通过检验也会变得无法正常使用，**需要重新杀毒通过检验后才能再次正常使用**。

1. 超过时效（正常通过检测30分钟）后，拨出再接入（控制端程序可自定义，10分钟~24小时均可）。
2. U盘上如果更新过文件，比如向里面拷了新文件等（控制端程序可自定义）。
3. U盘从当前电脑拔出后，又插到了另一台电脑上（控制端程序可自定义）。





## 案例分析

理论干巴巴的不好理解，好吧，给你举个例子分析一下就容易理解了。



同村的天涯哥喜欢拿着个U盘拷贝各种文件，由于经常往返于单位和家之间，造成了单位电脑时常发生中毒的情况。

于是我给他准备了一台UM4L杀毒专用的电脑（安装了Symantec Antivirus），并建议他每次使用前都要记得杀毒，可是他总是借口太忙。

好吧，我又在他的电脑上安装了UM4L客户端管理程序。

于是每当他插入U盘时，系统会自动锁定U盘并弹出警告提醒，他只好去杀毒。

当他认真完成杀毒动作后，系统会在U盘上做上验证标记，以证明它通过了检测。

就这样坚持了一阵子，总算养成了用前杀毒的好习惯，可是好景不长，又出些了状况。



### 状况一：杀毒一次，无限使用？

虽然通过了杀毒检测，只是这个验证标记必须要有时效。

系统默认时效为30分钟，通过UM4L控制端程序也可以自定义，10分钟到24小时均可。



### 状况二：时效内仍然可以无限使用？

单纯设定时效真的可以解决无限使用的问题吗？

好像没那么简单啊！

比如在30分钟之内，我就可以无限使用U盘而不用杀毒了，难道我要进一步缩短时效吗？

那缩短到多少时间合适呢？

答案肯定是：行不通！



所以，除了时间，只能想到另一个东西：状态。

简单地说，就是如果U盘上的文件发生了变化，不论是文件数量，还是文件大小，都视为验证失效。

也就是说，只要你使用了U盘，它的内容有了变动，那么它的有效性就没有了。

当它被拔出电脑后，由于状态变化杀毒检测验证失效，所以必须再次杀毒验证通过后才能继续使用。



### 状况三：我不动U盘内容，我就看看可以吗？

还有一种情况，U盘的内容只看不动，或者只把U盘的文件复制到电脑上，U盘本身没有任何变化。

好，我把这个U盘拨出后再插到了另一台不同的电脑上，注意，这时在时效内的U盘仍然可用！

你可以看出来吧，这有一定的风险不是吗？

因为此时如果中毒了，再将U盘接回前面的电脑上，因为验证仍然有效U盘可以正常使用，所以会导致电脑被感染病毒。



不知道我有没有描述明白？

如果你想让规则更严格一些，那么通过UM4L控制端程序的自定义行为修改，可以指定一次验证只能接入同一台电脑。

也就是说，在一定的时效内，你可以在同一台电脑上多次插拔U盘正常使用，但不可以将U盘再接到其他电脑上。

可能有小伙伴们会说，那我怎么拷贝文件到其他电脑上？

很简单，你只要记住：使用前先杀毒！



## 流程演示

说了这么多烧脑逻辑规则，还是有点晕乎乎的？

淡定淡定，我们来个实际的流程演示。



##### 一、将U盘接入病毒扫描专用电脑，系统自动识别插入动作。

图3

图4



##### 二、系统自动锁定键盘鼠标防止用户误操作，然后自动开始扫描杀毒。

图5



##### 三、扫描完毕后自动分析检测结果，完成后自动弹出U盘，用户直接拔出取走U盘即可。

图6

图7



##### 四、每次检查完毕，屏幕下方会显示检查结果和状态，正常为 `OK` ，异常为 `NG` 。

图8

图9



##### 五、接入客户端电脑，检测正常的U盘无任何提示直接使用，异常的U盘则会出现警告提示并被强制弹出。

图10





## 最后

实际上这个U盘杀毒管理程序远不止这些功能，它还包括但不限于以下所说的诸多功能。

比如，U盘杀毒和使用的记录管理，非登录资产（U盘）禁止接入、特权代码（出差在外的U盘管理）等等。

**特别要指出的一点是，这套管理程序是可以实现U盘杀毒离线管理的。**

用大白话讲就是，电脑不联网，也可以做到强制U盘杀毒后才可接入使用。

这项功能非常适合大量电脑分散放置而又不联网的场景。



小伙伴们肯定会想，我怎么会知道这么清楚，网上查不到相关资料啊！

哈哈，原因很简单啊，因为我就是程序的原作者。

如果你有什么疑问，欢迎留言讨论哦！





WeChat @网管小贾 | www.sysadm.cc

